"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.convertsEncodedSeparatorsInURI = convertsEncodedSeparatorsInURI;
function convertsEncodedSeparatorsInURI(uri) {
    let hasBackSlash = false;
    const segments = uri
        .pathname()
        .split('/')
        .map((x) => {
        const subsegs = decodeURIComponent(x).split(/[\\\/]/g); // eslint-disable-line no-useless-escape
        if (subsegs.length > 1) {
            hasBackSlash = true;
            return subsegs.map((subseg) => encodeURIComponent(subseg)).join('/');
        }
        else {
            return x;
        }
    });
    if (hasBackSlash) {
        uri.pathname(segments.join('/'));
    }
    return uri;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXJpLXV0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2NvcmUvYXNzZXRzL2Fzc2V0LWhhbmRsZXIvYXNzZXRzL3V0aWxzL3VyaS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLHdFQWtCQztBQWxCRCxTQUFnQiw4QkFBOEIsQ0FBQyxHQUFRO0lBQ25ELElBQUksWUFBWSxHQUFHLEtBQUssQ0FBQztJQUN6QixNQUFNLFFBQVEsR0FBRyxHQUFHO1NBQ2YsUUFBUSxFQUFFO1NBQ1YsS0FBSyxDQUFDLEdBQUcsQ0FBQztTQUNWLEdBQUcsQ0FBQyxDQUFDLENBQVMsRUFBRSxFQUFFO1FBQ2YsTUFBTSxPQUFPLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsd0NBQXdDO1FBQ2hHLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQztZQUNyQixZQUFZLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekUsQ0FBQzthQUFNLENBQUM7WUFDSixPQUFPLENBQUMsQ0FBQztRQUNiLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLElBQUksWUFBWSxFQUFFLENBQUM7UUFDZixHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDZixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVSSSBmcm9tICd1cmlqcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydHNFbmNvZGVkU2VwYXJhdG9yc0luVVJJKHVyaTogVVJJKSB7XHJcbiAgICBsZXQgaGFzQmFja1NsYXNoID0gZmFsc2U7XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IHVyaVxyXG4gICAgICAgIC5wYXRobmFtZSgpXHJcbiAgICAgICAgLnNwbGl0KCcvJylcclxuICAgICAgICAubWFwKCh4OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc3Vic2VncyA9IGRlY29kZVVSSUNvbXBvbmVudCh4KS5zcGxpdCgvW1xcXFxcXC9dL2cpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXHJcbiAgICAgICAgICAgIGlmIChzdWJzZWdzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGhhc0JhY2tTbGFzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2Vncy5tYXAoKHN1YnNlZykgPT4gZW5jb2RlVVJJQ29tcG9uZW50KHN1YnNlZykpLmpvaW4oJy8nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBpZiAoaGFzQmFja1NsYXNoKSB7XHJcbiAgICAgICAgdXJpLnBhdGhuYW1lKHNlZ21lbnRzLmpvaW4oJy8nKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXJpO1xyXG59XHJcbiJdfQ==