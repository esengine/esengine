"use strict";
const defaultOption = { glsl1: true, glsl3: true, glsl4: true };
function stripEditorSupport(effect, options = defaultOption) {
    for (const shader of effect.shaders) {
        delete shader.varyings;
        if (!options.glsl4) {
            delete shader.glsl4;
        }
        if (!options.glsl3) {
            delete shader.glsl3;
        }
        if (!options.glsl1) {
            delete shader.glsl1;
        }
        for (const define of shader.defines) {
            delete define.defines;
            delete define.editor;
        }
        // for (const block of shader.blocks) { delete block.defines; }
        // for (const samplerTexture of shader.samplerTextures) { delete samplerTexture.defines; }
    }
    for (const tech of effect.techniques) {
        for (const pass of tech.passes) {
            delete pass.migrations;
            const props = pass.properties;
            if (!props) {
                continue;
            }
            for (const name in props) {
                delete props[name].editor;
            }
        }
    }
    delete effect.dependencies;
    return effect;
}
module.exports = {
    stripEditorSupport,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29yZS9hc3NldHMvZWZmZWN0LWNvbXBpbGVyL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLGFBQWEsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFFaEUsU0FBUyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsT0FBTyxHQUFHLGFBQWE7SUFDdkQsS0FBSyxNQUFNLE1BQU0sSUFBSSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbEMsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDakIsT0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2pCLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQztRQUN4QixDQUFDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNqQixPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDeEIsQ0FBQztRQUNELEtBQUssTUFBTSxNQUFNLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2xDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUN0QixPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDekIsQ0FBQztRQUNELCtEQUErRDtRQUMvRCwwRkFBMEY7SUFDOUYsQ0FBQztJQUNELEtBQUssTUFBTSxJQUFJLElBQUksTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ25DLEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQzdCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUN2QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQzlCLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDVCxTQUFTO1lBQ2IsQ0FBQztZQUNELEtBQUssTUFBTSxJQUFJLElBQUksS0FBSyxFQUFFLENBQUM7Z0JBQ3ZCLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUM5QixDQUFDO1FBQ0wsQ0FBQztJQUNMLENBQUM7SUFDRCxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDM0IsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7SUFDYixrQkFBa0I7Q0FDckIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRlZmF1bHRPcHRpb24gPSB7IGdsc2wxOiB0cnVlLCBnbHNsMzogdHJ1ZSwgZ2xzbDQ6IHRydWUgfTtcclxuXHJcbmZ1bmN0aW9uIHN0cmlwRWRpdG9yU3VwcG9ydChlZmZlY3QsIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9uKSB7XHJcbiAgICBmb3IgKGNvbnN0IHNoYWRlciBvZiBlZmZlY3Quc2hhZGVycykge1xyXG4gICAgICAgIGRlbGV0ZSBzaGFkZXIudmFyeWluZ3M7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zLmdsc2w0KSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzaGFkZXIuZ2xzbDQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghb3B0aW9ucy5nbHNsMykge1xyXG4gICAgICAgICAgICBkZWxldGUgc2hhZGVyLmdsc2wzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW9wdGlvbnMuZ2xzbDEpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHNoYWRlci5nbHNsMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkZWZpbmUgb2Ygc2hhZGVyLmRlZmluZXMpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGRlZmluZS5kZWZpbmVzO1xyXG4gICAgICAgICAgICBkZWxldGUgZGVmaW5lLmVkaXRvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBibG9jayBvZiBzaGFkZXIuYmxvY2tzKSB7IGRlbGV0ZSBibG9jay5kZWZpbmVzOyB9XHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBzYW1wbGVyVGV4dHVyZSBvZiBzaGFkZXIuc2FtcGxlclRleHR1cmVzKSB7IGRlbGV0ZSBzYW1wbGVyVGV4dHVyZS5kZWZpbmVzOyB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHRlY2ggb2YgZWZmZWN0LnRlY2huaXF1ZXMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhc3Mgb2YgdGVjaC5wYXNzZXMpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhc3MubWlncmF0aW9ucztcclxuICAgICAgICAgICAgY29uc3QgcHJvcHMgPSBwYXNzLnByb3BlcnRpZXM7XHJcbiAgICAgICAgICAgIGlmICghcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzW25hbWVdLmVkaXRvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlbGV0ZSBlZmZlY3QuZGVwZW5kZW5jaWVzO1xyXG4gICAgcmV0dXJuIGVmZmVjdDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBzdHJpcEVkaXRvclN1cHBvcnQsXHJcbn07XHJcbiJdfQ==