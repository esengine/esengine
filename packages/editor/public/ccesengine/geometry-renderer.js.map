{"version":3,"file":"geometry-renderer.js","sources":["../../../cocos/rendering/geometry-renderer.ts"],"sourcesContent":["/*\r\n Copyright (c) 2020-2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { Color, Mat4, Vec3, Vec4, geometry, warnID, toRadian, cclegacy } from '../core';\r\nimport { SetIndex } from './define';\r\nimport { PipelineStateManager } from './pipeline-state-manager';\r\nimport { Attribute, AttributeName, Buffer, BufferInfo, BufferUsageBit,\r\n    CommandBuffer, Device, DrawInfo, Format, InputAssembler,\r\n    InputAssemblerInfo, MemoryUsageBit, RenderPass } from '../gfx';\r\n\r\nimport { PipelineSceneData } from './pipeline-scene-data';\r\n\r\nconst _min = new Vec3();\r\nconst _max = new Vec3();\r\nconst _v0 = new Vec3();\r\nconst _v1 = new Vec3();\r\nconst _v2 = new Vec3();\r\nconst _v3 = new Vec3();\r\nconst _v4 = new Vec3();\r\nconst _v5 = new Vec3();\r\nconst _v6 = new Vec3();\r\nconst _v7 = new Vec3();\r\n\r\n/**\r\n * GEOMETRY_DEPTH_TYPE_COUNT:\r\n * [0]: no depthTest\r\n * [1]: depthTest\r\n */\r\nconst GEOMETRY_DEPTH_TYPE_COUNT       = 2;\r\nconst GEOMETRY_NO_DEPTH_TEST_PASS_NUM = 1;\r\nconst GEOMETRY_DEPTH_TEST_PASS_NUM    = 2;\r\nconst GEOMETRY_VERTICES_PER_LINE      = 2;\r\nconst GEOMETRY_VERTICES_PER_TRIANGLE  = 3;\r\nconst GEOMETRY_MAX_LINES              = 30000;\r\nconst GEOMETRY_MAX_DASHED_LINES       = 10000;\r\nconst GEOMETRY_MAX_TRIANGLES          = 10000;\r\n\r\nenum GeometryType {\r\n    LINE = 0,\r\n    DASHED_LINE = 1,\r\n    TRIANGLE = 2\r\n}\r\n\r\nclass GeometryVertexBuffer {\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _maxVertices = 0;\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _vertexCount = 0;\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _stride = 0;\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _vertices!: Float32Array;\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _buffer!: Buffer;\r\n    /**\r\n     * @deprecated since v3.5.0, this is an engine private interface that will be removed in the future.\r\n     */\r\n    public _inputAssembler!: InputAssembler;\r\n\r\n    public init (device: Device, maxVertices: number, stride: number, attributes: Attribute[]): void {\r\n        this._maxVertices = maxVertices;\r\n        this._vertexCount = 0;\r\n        this._stride = stride;\r\n        this._vertices = new Float32Array(maxVertices * stride / Float32Array.BYTES_PER_ELEMENT);\r\n        this._buffer = device.createBuffer(new BufferInfo(\r\n            BufferUsageBit.VERTEX | BufferUsageBit.TRANSFER_DST,\r\n            MemoryUsageBit.DEVICE,\r\n            maxVertices * stride,\r\n            stride,\r\n        ));\r\n        this._inputAssembler = device.createInputAssembler(new InputAssemblerInfo(attributes, [this._buffer], null));\r\n    }\r\n\r\n    public getCount (): number { return Math.min(this._vertexCount, this._maxVertices); }\r\n    public empty (): boolean { return this._vertexCount === 0; }\r\n    public reset (): void { this._vertexCount = 0; }\r\n\r\n    public update (): void {\r\n        if (!this.empty()) {\r\n            const count = this.getCount();\r\n            const size = count * this._stride;\r\n            this._buffer.update(this._vertices, size);\r\n        }\r\n    }\r\n\r\n    public destroy (): void {\r\n        if (this._inputAssembler) {\r\n            this._inputAssembler.destroy();\r\n        }\r\n\r\n        if (this._buffer) {\r\n            this._buffer.destroy();\r\n        }\r\n    }\r\n}\r\n\r\nclass GeometryVertexBuffers {\r\n    public lines: GeometryVertexBuffer[] = [];\r\n    public dashedLines: GeometryVertexBuffer[] = [];\r\n    public triangles: GeometryVertexBuffer[] = [];\r\n\r\n    constructor () {\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            this.lines[i] = new GeometryVertexBuffer();\r\n            this.dashedLines[i] = new GeometryVertexBuffer();\r\n            this.triangles[i] = new GeometryVertexBuffer();\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IGeometryInfo {\r\n    maxLines: number;\r\n    maxDashedLines: number;\r\n    maxTriangles: number;\r\n}\r\n\r\nexport class GeometryRenderer {\r\n    private _device: Device | null = null;\r\n    private _buffers: GeometryVertexBuffers;\r\n\r\n    public constructor () {\r\n        this._buffers = new GeometryVertexBuffers();\r\n    }\r\n\r\n    public activate (device: Device, info?: IGeometryInfo): void {\r\n        this._device = device;\r\n\r\n        const posColorAttributes: Attribute[] = [\r\n            new Attribute(AttributeName.ATTR_POSITION, Format.RGB32F),\r\n            new Attribute(AttributeName.ATTR_COLOR, Format.RGBA32F),\r\n        ];\r\n\r\n        const posNormColorAttributes: Attribute[] = [\r\n            new Attribute(AttributeName.ATTR_POSITION, Format.RGB32F),\r\n            new Attribute(AttributeName.ATTR_NORMAL, Format.RGBA32F),\r\n            new Attribute(AttributeName.ATTR_COLOR, Format.RGBA32F),\r\n        ];\r\n\r\n        const maxLines = info ? info.maxLines : GEOMETRY_MAX_LINES;\r\n        const maxDashedLines = info ? info.maxDashedLines : GEOMETRY_MAX_DASHED_LINES;\r\n        const maxTriangles = info ? info.maxTriangles : GEOMETRY_MAX_TRIANGLES;\r\n        const lineStride = Float32Array.BYTES_PER_ELEMENT * (Vec3.length + Color.length);\r\n        const triangleStride = Float32Array.BYTES_PER_ELEMENT * (Vec3.length + Vec4.length + Color.length);\r\n\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            this._buffers.lines[i].init(this._device, maxLines * GEOMETRY_VERTICES_PER_LINE, lineStride, posColorAttributes);\r\n            this._buffers.dashedLines[i].init(this._device, maxDashedLines * GEOMETRY_VERTICES_PER_LINE, lineStride, posColorAttributes);\r\n            this._buffers.triangles[i].init(this._device, maxTriangles * GEOMETRY_VERTICES_PER_TRIANGLE, triangleStride, posNormColorAttributes);\r\n        }\r\n    }\r\n\r\n    public render (renderPass: RenderPass, cmdBuff: CommandBuffer, sceneData: PipelineSceneData): void {\r\n        const passes = sceneData.geometryRendererPasses;\r\n        const shaders = sceneData.geometryRendererShaders;\r\n\r\n        let offset = 0;\r\n        const passCount: number[] = [GEOMETRY_NO_DEPTH_TEST_PASS_NUM, GEOMETRY_DEPTH_TEST_PASS_NUM];\r\n\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            const lines = this._buffers.lines[i];\r\n            if (!lines.empty()) {\r\n                const drawInfo = new DrawInfo();\r\n                drawInfo.vertexCount = lines.getCount();\r\n\r\n                for (let p = 0; p < passCount[i]; p++) {\r\n                    const pass   = passes[offset + p];\r\n                    const shader = shaders[offset + p];\r\n                    const pso    = PipelineStateManager.getOrCreatePipelineState(this._device!, pass, shader, renderPass, lines._inputAssembler);\r\n                    cmdBuff.bindPipelineState(pso);\r\n                    cmdBuff.bindDescriptorSet(SetIndex.MATERIAL, pass.descriptorSet);\r\n                    cmdBuff.bindInputAssembler(lines._inputAssembler);\r\n                    cmdBuff.draw(drawInfo);\r\n                }\r\n            }\r\n\r\n            offset += passCount[i];\r\n        }\r\n\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            const dashedLines = this._buffers.dashedLines[i];\r\n            if (!dashedLines.empty()) {\r\n                const drawInfo = new DrawInfo();\r\n                drawInfo.vertexCount = dashedLines.getCount();\r\n\r\n                for (let p = 0; p < passCount[i]; p++) {\r\n                    const pass   = passes[offset + p];\r\n                    const shader = shaders[offset + p];\r\n                    const pso = PipelineStateManager.getOrCreatePipelineState(this._device!, pass, shader, renderPass, dashedLines._inputAssembler);\r\n                    cmdBuff.bindPipelineState(pso);\r\n                    cmdBuff.bindDescriptorSet(SetIndex.MATERIAL, pass.descriptorSet);\r\n                    cmdBuff.bindInputAssembler(dashedLines._inputAssembler);\r\n                    cmdBuff.draw(drawInfo);\r\n                }\r\n            }\r\n\r\n            offset += passCount[i];\r\n        }\r\n\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            const triangles = this._buffers.triangles[i];\r\n            if (!triangles.empty()) {\r\n                const drawInfo = new DrawInfo();\r\n                drawInfo.vertexCount = triangles.getCount();\r\n\r\n                for (let p = 0; p < passCount[i]; p++) {\r\n                    const pass   = passes[offset + p];\r\n                    const shader = shaders[offset + p];\r\n                    const pso    = PipelineStateManager.getOrCreatePipelineState(this._device!, pass, shader, renderPass, triangles._inputAssembler);\r\n                    cmdBuff.bindPipelineState(pso);\r\n                    cmdBuff.bindDescriptorSet(SetIndex.MATERIAL, pass.descriptorSet);\r\n                    cmdBuff.bindInputAssembler(triangles._inputAssembler);\r\n                    cmdBuff.draw(drawInfo);\r\n                }\r\n            }\r\n\r\n            offset += passCount[i];\r\n        }\r\n\r\n        // reset all geometry data for next frame\r\n        this.reset();\r\n    }\r\n\r\n    public destroy (): void {\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            this._buffers.lines[i].destroy();\r\n            this._buffers.dashedLines[i].destroy();\r\n            this._buffers.triangles[i].destroy();\r\n        }\r\n    }\r\n\r\n    public empty (): boolean {\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            if (!this._buffers.lines[i].empty()\r\n                || !this._buffers.dashedLines[i].empty()\r\n                || !this._buffers.triangles[i].empty()) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public update (): void {\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            this._buffers.lines[i].update();\r\n            this._buffers.dashedLines[i].update();\r\n            this._buffers.triangles[i].update();\r\n        }\r\n    }\r\n\r\n    public reset (): void {\r\n        for (let i = 0; i < GEOMETRY_DEPTH_TYPE_COUNT; i++) {\r\n            this._buffers.lines[i].reset();\r\n            this._buffers.dashedLines[i].reset();\r\n            this._buffers.triangles[i].reset();\r\n        }\r\n    }\r\n\r\n    public addDashedLine (v0: Vec3, v1: Vec3, color: Color, depthTest = true): void {\r\n        const dashedLines = this._buffers.dashedLines[depthTest ? 1 : 0];\r\n        if (dashedLines._vertexCount + GEOMETRY_VERTICES_PER_LINE > dashedLines._maxVertices) {\r\n            warnID(12008);\r\n            return;\r\n        }\r\n\r\n        // add v0 vertex\r\n        let offset = dashedLines._vertexCount * (Vec3.length + Color.length);\r\n        Vec3.toArray(dashedLines._vertices, v0, offset);\r\n        offset += Vec3.length;\r\n        Color.toArray(dashedLines._vertices, color, offset);\r\n        offset += Color.length;\r\n\r\n        // add v1 vertex\r\n        Vec3.toArray(dashedLines._vertices, v1, offset);\r\n        offset += Vec3.length;\r\n        Color.toArray(dashedLines._vertices, color, offset);\r\n\r\n        dashedLines._vertexCount += GEOMETRY_VERTICES_PER_LINE;\r\n    }\r\n\r\n    public addLine (v0: Vec3, v1: Vec3, color: Color, depthTest = true): void {\r\n        const lines = this._buffers.lines[depthTest ? 1 : 0];\r\n        if (lines._vertexCount + GEOMETRY_VERTICES_PER_LINE > lines._maxVertices) {\r\n            warnID(12008);\r\n            return;\r\n        }\r\n\r\n        // add v0 vertex\r\n        let offset = lines._vertexCount * (Vec3.length + Color.length);\r\n        Vec3.toArray(lines._vertices, v0, offset);\r\n        offset += Vec3.length;\r\n        Color.toArray(lines._vertices, color, offset);\r\n        offset += Color.length;\r\n\r\n        // add v1 vertex\r\n        Vec3.toArray(lines._vertices, v1, offset);\r\n        offset += Vec3.length;\r\n        Color.toArray(lines._vertices, color, offset);\r\n\r\n        lines._vertexCount += GEOMETRY_VERTICES_PER_LINE;\r\n    }\r\n\r\n    public addTriangle (v0: Vec3, v1: Vec3, v2: Vec3, color: Color, wireframe = true, depthTest = true, unlit = false): void {\r\n        if (wireframe) {\r\n            this.addLine(v0, v1, color, depthTest);\r\n            this.addLine(v1, v2, color, depthTest);\r\n            this.addLine(v2, v0, color, depthTest);\r\n            return;\r\n        }\r\n\r\n        const triangles = this._buffers.triangles[depthTest ? 1 : 0];\r\n        if (triangles._vertexCount + GEOMETRY_VERTICES_PER_TRIANGLE > triangles._maxVertices) {\r\n            warnID(12009);\r\n            return;\r\n        }\r\n\r\n        const normal = new Vec4(Vec4.ZERO);\r\n        if (!unlit) {\r\n            const dist1 = new Vec3(v1.x - v0.x, v1.y - v0.y, v1.z - v0.z);\r\n            const dist2 = new Vec3(v2.x - v0.x, v2.y - v0.y, v2.z - v0.z);\r\n            const norm = new Vec3();\r\n            Vec3.normalize(norm, Vec3.cross(norm, dist1, dist2));\r\n            normal.set(norm.x, norm.y, norm.z, 1.0);\r\n        }\r\n\r\n        // add v0 vertex\r\n        let offset = triangles._vertexCount * (Vec3.length + Vec4.length + Color.length);\r\n        Vec3.toArray(triangles._vertices, v0, offset);\r\n        offset += Vec3.length;\r\n        Vec4.toArray(triangles._vertices, normal, offset);\r\n        offset += Vec4.length;\r\n        Color.toArray(triangles._vertices, color, offset);\r\n        offset += Color.length;\r\n\r\n        // add v1 vertex\r\n        Vec3.toArray(triangles._vertices, v1, offset);\r\n        offset += Vec3.length;\r\n        Vec4.toArray(triangles._vertices, normal, offset);\r\n        offset += Vec4.length;\r\n        Color.toArray(triangles._vertices, color, offset);\r\n        offset += Color.length;\r\n\r\n        // add v2 vertex\r\n        Vec3.toArray(triangles._vertices, v2, offset);\r\n        offset += Vec3.length;\r\n        Vec4.toArray(triangles._vertices, normal, offset);\r\n        offset += Vec4.length;\r\n        Color.toArray(triangles._vertices, color, offset);\r\n\r\n        triangles._vertexCount += GEOMETRY_VERTICES_PER_TRIANGLE;\r\n    }\r\n\r\n    public addQuad (v0: Vec3, v1: Vec3, v2: Vec3, v3: Vec3, color: Color, wireframe = true, depthTest = true, unlit = false): void {\r\n        /**\r\n         *  3---2\r\n         *  |   |\r\n         *  0---1\r\n         */\r\n\r\n        if (wireframe) {\r\n            this.addLine(v0, v1, color, depthTest);\r\n            this.addLine(v1, v2, color, depthTest);\r\n            this.addLine(v2, v3, color, depthTest);\r\n            this.addLine(v3, v0, color, depthTest);\r\n        } else {\r\n            this.addTriangle(v0, v1, v2, color, wireframe, depthTest, unlit);\r\n            this.addTriangle(v0, v2, v3, color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addBoundingBox (\r\n        aabb: geometry.AABB,\r\n        color: Color,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Mat4 = new Mat4(),\r\n    ): void {\r\n        /**\r\n         *     2---3\r\n         *    /   /\r\n         *   6---7\r\n         *     0---1\r\n         *    /   /\r\n         *   4---5\r\n         *\r\n         */\r\n\r\n        _min.set(aabb.center.x - aabb.halfExtents.x, aabb.center.y - aabb.halfExtents.y, aabb.center.z - aabb.halfExtents.z);\r\n        _max.set(aabb.center.x + aabb.halfExtents.x, aabb.center.y + aabb.halfExtents.y, aabb.center.z + aabb.halfExtents.z);\r\n\r\n        _v0.set(_min.x, _min.y, _min.z);\r\n        _v1.set(_max.x, _min.y, _min.z);\r\n        _v2.set(_min.x, _max.y, _min.z);\r\n        _v3.set(_max.x, _max.y, _min.z);\r\n        _v4.set(_min.x, _min.y, _max.z);\r\n        _v5.set(_max.x, _min.y, _max.z);\r\n        _v6.set(_min.x, _max.y, _max.z);\r\n        _v7.set(_max.x, _max.y, _max.z);\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(_v0, _v0, transform);\r\n            Vec3.transformMat4(_v1, _v1, transform);\r\n            Vec3.transformMat4(_v2, _v2, transform);\r\n            Vec3.transformMat4(_v3, _v3, transform);\r\n            Vec3.transformMat4(_v4, _v4, transform);\r\n            Vec3.transformMat4(_v5, _v5, transform);\r\n            Vec3.transformMat4(_v6, _v6, transform);\r\n            Vec3.transformMat4(_v7, _v7, transform);\r\n        }\r\n\r\n        if (wireframe) {\r\n            this.addLine(_v6, _v7, color, depthTest);\r\n            this.addLine(_v7, _v3, color, depthTest);\r\n            this.addLine(_v3, _v2, color, depthTest);\r\n            this.addLine(_v2, _v6, color, depthTest);\r\n\r\n            this.addLine(_v4, _v5, color, depthTest);\r\n            this.addLine(_v5, _v1, color, depthTest);\r\n            this.addLine(_v1, _v0, color, depthTest);\r\n            this.addLine(_v0, _v4, color, depthTest);\r\n\r\n            this.addLine(_v6, _v4, color, depthTest);\r\n            this.addLine(_v7, _v5, color, depthTest);\r\n            this.addLine(_v3, _v1, color, depthTest);\r\n            this.addLine(_v2, _v0, color, depthTest);\r\n        } else {\r\n            this.addQuad(_v4, _v5, _v7, _v6, color, wireframe, depthTest, unlit);\r\n            this.addQuad(_v5, _v1, _v3, _v7, color, wireframe, depthTest, unlit);\r\n            this.addQuad(_v1, _v0, _v2, _v3, color, wireframe, depthTest, unlit);\r\n            this.addQuad(_v0, _v4, _v6, _v2, color, wireframe, depthTest, unlit);\r\n            this.addQuad(_v6, _v7, _v3, _v2, color, wireframe, depthTest, unlit);\r\n            this.addQuad(_v0, _v1, _v5, _v4, color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addCross (position: Vec3, size: number, color: Color, depthTest = true): void {\r\n        const halfSize = size * 0.5;\r\n\r\n        const v0 = new Vec3(position.x - halfSize, position.y, position.z);\r\n        const v1 = new Vec3(position.x + halfSize, position.y, position.z);\r\n        this.addLine(v0, v1, color, depthTest);\r\n\r\n        v0.set(position.x, position.y - halfSize, position.z);\r\n        v1.set(position.x, position.y + halfSize, position.z);\r\n        this.addLine(v0, v1, color, depthTest);\r\n\r\n        v0.set(position.x, position.y, position.z - halfSize);\r\n        v1.set(position.x, position.y, position.z + halfSize);\r\n        this.addLine(v0, v1, color, depthTest);\r\n    }\r\n\r\n    public addFrustum (frustum: geometry.Frustum, color: Color, depthTest = true): void {\r\n        const vertices = frustum.vertices;\r\n\r\n        this.addLine(vertices[0], vertices[1], color, depthTest);\r\n        this.addLine(vertices[1], vertices[2], color, depthTest);\r\n        this.addLine(vertices[2], vertices[3], color, depthTest);\r\n        this.addLine(vertices[3], vertices[0], color, depthTest);\r\n\r\n        this.addLine(vertices[4], vertices[5], color, depthTest);\r\n        this.addLine(vertices[5], vertices[6], color, depthTest);\r\n        this.addLine(vertices[6], vertices[7], color, depthTest);\r\n        this.addLine(vertices[7], vertices[4], color, depthTest);\r\n\r\n        this.addLine(vertices[0], vertices[4], color, depthTest);\r\n        this.addLine(vertices[1], vertices[5], color, depthTest);\r\n        this.addLine(vertices[2], vertices[6], color, depthTest);\r\n        this.addLine(vertices[3], vertices[7], color, depthTest);\r\n    }\r\n\r\n    public addCapsule (\r\n        center: Vec3,\r\n        radius: number,\r\n        height: number,\r\n        color: Color,\r\n        segmentsU = 32,\r\n        hemiSegmentsV = 8,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi   = Math.PI * 2.0 / segmentsU;\r\n        const deltaTheta = Math.PI / 2.0 / hemiSegmentsV;\r\n        const bottomCenter = new Vec3(center.x, center.y - height / 2.0, center.z);\r\n        const topCenter = new Vec3(center.x, center.y + height / 2.0, center.z);\r\n\r\n        const bottomPoints: Vec3[][] = [];\r\n        const topPoints: Vec3[][] = [];\r\n\r\n        for (let i = 0; i < hemiSegmentsV + 1; i++) {\r\n            const bottomList: Vec3[] = [];\r\n            const topList: Vec3[] = [];\r\n\r\n            const theta    = i * deltaTheta;\r\n            const sinTheta = Math.sin(theta);\r\n            const cosTheta = Math.cos(theta);\r\n\r\n            for (let j = 0; j < segmentsU + 1; j++) {\r\n                const phi    = j * deltaPhi;\r\n                const sinPhi = Math.sin(phi);\r\n                const cosPhi = Math.cos(phi);\r\n                const  p = new Vec3(radius * sinTheta * cosPhi, radius * cosTheta, radius * sinTheta * sinPhi);\r\n\r\n                const p0 = new Vec3(bottomCenter.x + p.x, bottomCenter.y - p.y, bottomCenter.z + p.z);\r\n                const p1 = new Vec3(topCenter.x + p.x, topCenter.y + p.y, topCenter.z + p.z);\r\n                bottomList.push(p0);\r\n                topList.push(p1);\r\n            }\r\n\r\n            bottomPoints.push(bottomList);\r\n            topPoints.push(topList);\r\n        }\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < hemiSegmentsV + 1; i++) {\r\n                for (let j = 0; j < segmentsU + 1; j++) {\r\n                    Vec3.transformMat4(bottomPoints[i][j], bottomPoints[i][j], transform);\r\n                    Vec3.transformMat4(topPoints[i][j], topPoints[i][j], transform);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < hemiSegmentsV; i++) {\r\n            for (let j = 0; j < segmentsU; j++) {\r\n                this.addTriangle(bottomPoints[i + 1][j], bottomPoints[i][j + 1], bottomPoints[i][j], color, wireframe, depthTest, unlit);\r\n                this.addTriangle(bottomPoints[i + 1][j], bottomPoints[i + 1][j + 1], bottomPoints[i][j + 1], color, wireframe, depthTest, unlit);\r\n\r\n                this.addTriangle(topPoints[i][j], topPoints[i + 1][j + 1], topPoints[i + 1][j], color, wireframe, depthTest, unlit);\r\n                this.addTriangle(topPoints[i][j], topPoints[i][j + 1], topPoints[i + 1][j + 1], color, wireframe, depthTest, unlit);\r\n            }\r\n        }\r\n\r\n        const bottomCircle = bottomPoints[hemiSegmentsV];\r\n        const topCircle    = topPoints[hemiSegmentsV];\r\n        for (let j = 0; j < segmentsU; j++) {\r\n            this.addTriangle(topCircle[j], bottomCircle[j + 1], bottomCircle[j], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(topCircle[j], topCircle[j + 1], bottomCircle[j + 1], color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addCylinder (\r\n        center: Vec3,\r\n        radius: number,\r\n        height: number,\r\n        color: Color,\r\n        segments = 32,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi = Math.PI * 2.0 / segments;\r\n        const bottomCenter = new Vec3(center.x, center.y - height / 2.0, center.z);\r\n        const topCenter = new Vec3(center.x, center.y + height / 2.0, center.z);\r\n        const bottomPoints: Vec3[] = [];\r\n        const topPoints: Vec3[] = [];\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const phi = i * deltaPhi;\r\n            const p = new Vec3(radius * Math.cos(phi), 0.0, radius * Math.sin(phi));\r\n            const p0 = new Vec3(p.x + bottomCenter.x, p.y + bottomCenter.y, p.z + bottomCenter.z);\r\n            const p1 = new Vec3(p.x + topCenter.x, p.y + topCenter.y, p.z + topCenter.z);\r\n            bottomPoints.push(p0);\r\n            topPoints.push(p1);\r\n        }\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(bottomCenter, bottomCenter, transform);\r\n            Vec3.transformMat4(topCenter, topCenter, transform);\r\n\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(bottomPoints[i], bottomPoints[i], transform);\r\n                Vec3.transformMat4(topPoints[i], topPoints[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addTriangle(topCenter, topPoints[i + 1], topPoints[i], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(bottomCenter, bottomPoints[i], bottomPoints[i + 1], color, wireframe, depthTest, unlit);\r\n\r\n            this.addTriangle(topPoints[i], bottomPoints[i + 1], bottomPoints[i], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(topPoints[i], topPoints[i + 1], bottomPoints[i + 1], color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addCone (\r\n        center: Vec3,\r\n        radius: number,\r\n        height: number,\r\n        color: Color,\r\n        segments = 32,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi = Math.PI * 2.0 / segments;\r\n        const bottomCenter = new Vec3(center.x, center.y - height / 2.0, center.z);\r\n        const topCenter = new Vec3(center.x, center.y + height / 2.0, center.z);\r\n        const bottomPoints: Vec3[] = [];\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const point = new Vec3(radius * Math.cos(i * deltaPhi), 0.0, radius * Math.sin(i * deltaPhi));\r\n            const p0 = new Vec3(point.x + bottomCenter.x, point.y + bottomCenter.y, point.z + bottomCenter.z);\r\n            bottomPoints.push(p0);\r\n        }\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(bottomCenter, bottomCenter, transform);\r\n            Vec3.transformMat4(topCenter, topCenter, transform);\r\n\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(bottomPoints[i], bottomPoints[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addTriangle(topCenter, bottomPoints[i + 1], bottomPoints[i], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(bottomCenter, bottomPoints[i], bottomPoints[i + 1], color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addCircle (center: Vec3, radius: number, color: Color, segments = 32, depthTest = true, useTransform = false, transform: Readonly<Mat4> = Mat4.IDENTITY): void {\r\n        const deltaPhi = Math.PI * 2.0 / segments;\r\n        const points: Vec3[] = [];\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const point = new Vec3(radius * Math.cos(i * deltaPhi), 0.0, radius * Math.sin(i * deltaPhi));\r\n            const p0 = new Vec3(point.x + center.x, point.y + center.y, point.z + center.z);\r\n            points.push(p0);\r\n        }\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(points[i], points[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addLine(points[i], points[i + 1], color, depthTest);\r\n        }\r\n    }\r\n\r\n    public addArc (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        startAngle: number,\r\n        endAngle: number,\r\n        segments = 32,\r\n        depthTest = true,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const startRadian = toRadian(startAngle);\r\n        const endRadian = toRadian(endAngle);\r\n        const deltaPhi = (endRadian - startRadian) / segments;\r\n        const points: Vec3[] = [];\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const point = new Vec3(radius * Math.cos(i * deltaPhi + startRadian), 0.0, radius * Math.sin(i * deltaPhi + startRadian));\r\n            const p0 = new Vec3(point.x + center.x, point.y + center.y, point.z + center.z);\r\n            points.push(p0);\r\n        }\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(points[i], points[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addLine(points[i], points[i + 1], color, depthTest);\r\n        }\r\n    }\r\n\r\n    public addPolygon (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        segments = 6,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        if (wireframe) {\r\n            this.addCircle(center, radius, color, segments, depthTest, useTransform, transform);\r\n        } else {\r\n            this.addDisc(center, radius, color, segments, wireframe, depthTest, unlit, useTransform, transform);\r\n        }\r\n    }\r\n\r\n    public addDisc (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        segments = 32,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi = Math.PI * 2.0 / segments;\r\n        const points: Vec3[] = [];\r\n        const newCenter = new Vec3(center);\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const point = new Vec3(radius * Math.cos(i * deltaPhi), 0.0, radius * Math.sin(i * deltaPhi));\r\n            const p0 = new Vec3(point.x + newCenter.x, point.y + newCenter.y, point.z + newCenter.z);\r\n            points.push(p0);\r\n        }\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(newCenter, newCenter, transform);\r\n\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(points[i], points[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addTriangle(newCenter, points[i], points[i + 1], color, wireframe, depthTest, unlit);\r\n        }\r\n\r\n        // two sides\r\n        if (!wireframe) {\r\n            for (let i = 0; i < segments; i++) {\r\n                this.addTriangle(newCenter, points[i + 1], points[i], color, wireframe, depthTest, unlit);\r\n            }\r\n        }\r\n    }\r\n\r\n    public addSector (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        startAngle: number,\r\n        endAngle: number,\r\n        segments = 32,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const startRadian = toRadian(startAngle);\r\n        const endRadian   = toRadian(endAngle);\r\n        const deltaPhi    = (endRadian - startRadian) / segments;\r\n        const points: Vec3[] = [];\r\n        const newCenter = new Vec3(center);\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const point = new Vec3(radius * Math.cos(i * deltaPhi), 0.0, radius * Math.sin(i * deltaPhi));\r\n            const p0 = new Vec3(point.x + newCenter.x, point.y + newCenter.y, point.z + newCenter.z);\r\n            points.push(p0);\r\n        }\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(newCenter, newCenter, transform);\r\n\r\n            for (let i = 0; i < segments + 1; i++) {\r\n                Vec3.transformMat4(points[i], points[i], transform);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addTriangle(newCenter, points[i], points[i + 1], color, wireframe, depthTest, unlit);\r\n        }\r\n\r\n        // two sides\r\n        if (!wireframe) {\r\n            for (let i = 0; i < segments; i++) {\r\n                this.addTriangle(newCenter, points[i + 1], points[i], color, wireframe, depthTest, unlit);\r\n            }\r\n        }\r\n    }\r\n\r\n    public addSphere (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        segmentsU = 32,\r\n        segmentsV = 16,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi   = Math.PI * 2.0 / segmentsU;\r\n        const deltaTheta = Math.PI / segmentsV;\r\n        const points: Vec3[][] = [];\r\n\r\n        for (let i = 0; i < segmentsV + 1; i++) {\r\n            const list: Vec3[] = [];\r\n\r\n            const theta    = i * deltaTheta;\r\n            const sinTheta = Math.sin(theta);\r\n            const cosTheta = Math.cos(theta);\r\n\r\n            for (let j = 0; j < segmentsU + 1; j++) {\r\n                const phi    = j * deltaPhi;\r\n                const sinPhi = Math.sin(phi);\r\n                const cosPhi = Math.cos(phi);\r\n                const p = new Vec3(radius * sinTheta * cosPhi, radius * cosTheta, radius * sinTheta * sinPhi);\r\n                const p0 = new Vec3(center.x + p.x, center.y + p.y, center.z + p.z);\r\n\r\n                list.push(p0);\r\n            }\r\n\r\n            points.push(list);\r\n        }\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < segmentsV + 1; i++) {\r\n                for (let j = 0; j < segmentsU + 1; j++) {\r\n                    Vec3.transformMat4(points[i][j], points[i][j], transform);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segmentsV; i++) {\r\n            for (let j = 0; j < segmentsU; j++) {\r\n                this.addTriangle(points[i][j], points[i + 1][j + 1], points[i + 1][j], color, wireframe, depthTest, unlit);\r\n                this.addTriangle(points[i][j], points[i][j + 1], points[i + 1][j + 1], color, wireframe, depthTest, unlit);\r\n            }\r\n        }\r\n    }\r\n\r\n    public addTorus (\r\n        center: Vec3,\r\n        bigRadius: number,\r\n        radius: number,\r\n        color: Color,\r\n        segmentsU = 32,\r\n        segmentsV = 16,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaPhi   = Math.PI * 2.0 / segmentsU;\r\n        const deltaTheta = Math.PI * 2.0 / segmentsV;\r\n        const points: Vec3[][] = [];\r\n\r\n        for (let i = 0; i < segmentsU + 1; i++) {\r\n            const list: Vec3[] = [];\r\n            const phi    = i * deltaPhi;\r\n            const sinPhi = Math.sin(phi);\r\n            const cosPhi = Math.cos(phi);\r\n\r\n            for (let j = 0; j < segmentsV + 1; j++) {\r\n                const theta    = j * deltaTheta;\r\n                const sinTheta = Math.sin(theta);\r\n                const cosTheta = Math.cos(theta);\r\n                const p = new Vec3((bigRadius + radius * cosTheta) * cosPhi, radius * sinTheta, (bigRadius + radius * cosTheta) * sinPhi);\r\n                const p0 = new Vec3(center.x + p.x, center.y + p.y, center.z + p.z);\r\n\r\n                list.push(p0);\r\n            }\r\n\r\n            points.push(list);\r\n        }\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < segmentsU + 1; i++) {\r\n                for (let j = 0; j < segmentsV + 1; j++) {\r\n                    Vec3.transformMat4(points[i][j], points[i][j], transform);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < segmentsU; i++) {\r\n            for (let j = 0; j < segmentsV; j++) {\r\n                this.addTriangle(points[i][j + 1], points[i + 1][j], points[i][j], color, wireframe, depthTest, unlit);\r\n                this.addTriangle(points[i][j + 1], points[i + 1][j + 1], points[i + 1][j], color, wireframe, depthTest, unlit);\r\n            }\r\n        }\r\n    }\r\n\r\n    public addOctahedron (\r\n        center: Vec3,\r\n        radius: number,\r\n        color: Color,\r\n        wireframe = true,\r\n        depthTest = true,\r\n        unlit = false,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const points: Vec3[] = [];\r\n\r\n        points.push(new Vec3(radius + center.x, center.y, center.z));\r\n        points.push(new Vec3(center.x, center.y, center.z - radius));\r\n        points.push(new Vec3(-radius + center.x, center.y, center.z));\r\n        points.push(new Vec3(center.x, center.y, center.z + radius));\r\n        points.push(new Vec3(center.x, center.y + radius, center.z));\r\n        points.push(new Vec3(center.x, center.y - radius, center.z));\r\n\r\n        if (useTransform) {\r\n            for (let i = 0; i < points.length; i++) {\r\n                Vec3.transformMat4(points[i], points[i], transform);\r\n            }\r\n        }\r\n\r\n        if (wireframe) {\r\n            this.addLine(points[0], points[1], color, depthTest);\r\n            this.addLine(points[1], points[2], color, depthTest);\r\n            this.addLine(points[2], points[3], color, depthTest);\r\n            this.addLine(points[3], points[0], color, depthTest);\r\n\r\n            this.addLine(points[0], points[4], color, depthTest);\r\n            this.addLine(points[1], points[4], color, depthTest);\r\n            this.addLine(points[2], points[4], color, depthTest);\r\n            this.addLine(points[3], points[4], color, depthTest);\r\n\r\n            this.addLine(points[0], points[5], color, depthTest);\r\n            this.addLine(points[1], points[5], color, depthTest);\r\n            this.addLine(points[2], points[5], color, depthTest);\r\n            this.addLine(points[3], points[5], color, depthTest);\r\n        } else {\r\n            this.addTriangle(points[0], points[1], points[4], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[1], points[2], points[4], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[2], points[3], points[4], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[3], points[0], points[4], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[0], points[3], points[5], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[3], points[2], points[5], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[2], points[1], points[5], color, wireframe, depthTest, unlit);\r\n            this.addTriangle(points[1], points[0], points[5], color, wireframe, depthTest, unlit);\r\n        }\r\n    }\r\n\r\n    public addBezier (\r\n        v0: Vec3,\r\n        v1: Vec3,\r\n        v2: Vec3,\r\n        v3: Vec3,\r\n        color: Color,\r\n        segments = 32,\r\n        depthTest = true,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        const deltaT = 1.0 / segments;\r\n        const points: Vec3[] = [];\r\n\r\n        const newV0 = new Vec3(v0);\r\n        const newV1 = new Vec3(v1);\r\n        const newV2 = new Vec3(v2);\r\n        const newV3 = new Vec3(v3);\r\n\r\n        if (useTransform) {\r\n            Vec3.transformMat4(newV0, newV0, transform);\r\n            Vec3.transformMat4(newV1, newV1, transform);\r\n            Vec3.transformMat4(newV2, newV2, transform);\r\n            Vec3.transformMat4(newV3, newV3, transform);\r\n        }\r\n\r\n        for (let i = 0; i < segments + 1; i++) {\r\n            const t = i * deltaT;\r\n            const a = (1.0 - t) * (1.0 - t) * (1.0 - t);\r\n            const b = 3.0 * t * (1.0 - t) * (1.0 - t);\r\n            const c = 3.0 * t * t * (1.0 - t);\r\n            const d = t * t * t;\r\n            const p0 = new Vec3(\r\n                a * newV0.x + b * newV1.x + c * newV2.x + d * newV3.x,\r\n                a * newV0.y + b * newV1.y + c * newV2.y + d * newV3.y,\r\n                a * newV0.z + b * newV1.z + c * newV2.z + d * newV3.z,\r\n            );\r\n\r\n            points.push(p0);\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addLine(points[i], points[i + 1], color, depthTest);\r\n        }\r\n    }\r\n\r\n    public addSpline (spline: geometry.Spline, color: Color, index = 0xffffffff, knotSize = 0.5, segments = 32, depthTest = true, useTransform = false, transform: Readonly<Mat4> = Mat4.IDENTITY): void {\r\n        const numPoints = segments + 1;\r\n        const points = spline.getPoints(numPoints, index);\r\n\r\n        if (useTransform) {\r\n            points.forEach((v: Vec3) => {\r\n                v.transformMat4(transform);\r\n            });\r\n        }\r\n\r\n        for (let i = 0; i < segments; i++) {\r\n            this.addLine(points[i], points[i + 1], color, depthTest);\r\n        }\r\n\r\n        if (knotSize > 0.0 && index === 0xffffffff) {\r\n            const crossColor = new Color(255 - color.r, 255 - color.g, 255 - color.b, color.a);\r\n            const numKnots = spline.getKnotCount();\r\n            const knots = spline.knots;\r\n\r\n            for (let i = 0; i < numKnots; i++) {\r\n                let knot = knots[i];\r\n                if (useTransform) {\r\n                    knot = knot.clone().transformMat4(transform);\r\n                }\r\n                this.addCross(knot, knotSize, crossColor, depthTest);\r\n            }\r\n        }\r\n    }\r\n\r\n    public addMesh (center: Vec3, vertices: Array<Vec3>, color: Color, depthTest = true, useTransform = false, transform: Readonly<Mat4> = Mat4.IDENTITY): void {\r\n        for (let i = 0; i < vertices.length; i += 3) {\r\n            const v0 = new Vec3(center.x + vertices[i].x, center.y + vertices[i].y, center.z + vertices[i].z);\r\n            const v1 = new Vec3(center.x + vertices[i + 1].x, center.y + vertices[i + 1].y, center.z + vertices[i + 1].z);\r\n            const v2 = new Vec3(center.x + vertices[i + 2].x, center.y + vertices[i + 2].y, center.z + vertices[i + 2].z);\r\n\r\n            if (useTransform) {\r\n                Vec3.transformMat4(v0, v0, transform);\r\n                Vec3.transformMat4(v1, v1, transform);\r\n                Vec3.transformMat4(v2, v2, transform);\r\n            }\r\n\r\n            this.addLine(v0, v1, color, depthTest);\r\n            this.addLine(v1, v2, color, depthTest);\r\n            this.addLine(v2, v0, color, depthTest);\r\n        }\r\n    }\r\n\r\n    public addIndexedMesh (\r\n        center: Vec3,\r\n        vertices: Array<Vec3>,\r\n        indices: Array<number>,\r\n        color: Color,\r\n        depthTest = true,\r\n        useTransform = false,\r\n        transform: Readonly<Mat4> = Mat4.IDENTITY,\r\n    ): void {\r\n        for (let i = 0; i < indices.length; i += 3) {\r\n            const v0 = new Vec3(center.x + vertices[indices[i]].x, center.y + vertices[indices[i]].y, center.z + vertices[indices[i]].z);\r\n            const v1 = new Vec3(center.x + vertices[indices[i + 1]].x, center.y + vertices[indices[i + 1]].y, center.z + vertices[indices[i + 1]].z);\r\n            const v2 = new Vec3(center.x + vertices[indices[i + 2]].x, center.y + vertices[indices[i + 2]].y, center.z + vertices[indices[i + 2]].z);\r\n\r\n            if (useTransform) {\r\n                Vec3.transformMat4(v0, v0, transform);\r\n                Vec3.transformMat4(v1, v1, transform);\r\n                Vec3.transformMat4(v2, v2, transform);\r\n            }\r\n\r\n            this.addLine(v0, v1, color, depthTest);\r\n            this.addLine(v1, v2, color, depthTest);\r\n            this.addLine(v2, v0, color, depthTest);\r\n        }\r\n    }\r\n}\r\n\r\ncclegacy.internal.GeometryRenderer = GeometryRenderer;\r\n"],"names":["_min","Vec3","_max","_v0","_v1","_v2","_v3","_v4","_v5","_v6","_v7","GEOMETRY_DEPTH_TYPE_COUNT","GEOMETRY_NO_DEPTH_TEST_PASS_NUM","GEOMETRY_DEPTH_TEST_PASS_NUM","GEOMETRY_VERTICES_PER_LINE","GEOMETRY_VERTICES_PER_TRIANGLE","GEOMETRY_MAX_LINES","GEOMETRY_MAX_DASHED_LINES","GEOMETRY_MAX_TRIANGLES","GeometryType","GeometryVertexBuffer","_maxVertices","_vertexCount","_stride","_vertices","_buffer","_inputAssembler","_proto","prototype","init","device","maxVertices","stride","attributes","Float32Array","BYTES_PER_ELEMENT","createBuffer","BufferInfo","BufferUsageBit","VERTEX","TRANSFER_DST","MemoryUsageBit","DEVICE","createInputAssembler","InputAssemblerInfo","getCount","Math","min","empty","reset","update","count","size","destroy","GeometryVertexBuffers","lines","dashedLines","triangles","i","GeometryRenderer","_device","_buffers","_proto2","activate","info","posColorAttributes","Attribute","AttributeName","ATTR_POSITION","Format","RGB32F","ATTR_COLOR","RGBA32F","posNormColorAttributes","ATTR_NORMAL","maxLines","maxDashedLines","maxTriangles","lineStride","length","Color","triangleStride","Vec4","render","renderPass","cmdBuff","sceneData","passes","geometryRendererPasses","shaders","geometryRendererShaders","offset","passCount","drawInfo","DrawInfo","vertexCount","p","pass","shader","pso","PipelineStateManager","getOrCreatePipelineState","bindPipelineState","bindDescriptorSet","SetIndex","MATERIAL","descriptorSet","bindInputAssembler","draw","addDashedLine","v0","v1","color","depthTest","warnID","toArray","addLine","addTriangle","v2","wireframe","unlit","normal","ZERO","dist1","x","y","z","dist2","norm","normalize","cross","set","addQuad","v3","addBoundingBox","aabb","useTransform","transform","Mat4","center","halfExtents","transformMat4","addCross","position","halfSize","addFrustum","frustum","vertices","addCapsule","radius","height","segmentsU","hemiSegmentsV","IDENTITY","deltaPhi","PI","deltaTheta","bottomCenter","topCenter","bottomPoints","topPoints","bottomList","topList","theta","sinTheta","sin","cosTheta","cos","j","phi","sinPhi","cosPhi","p0","p1","push","bottomCircle","topCircle","addCylinder","segments","addCone","point","addCircle","points","addArc","startAngle","endAngle","startRadian","toRadian","endRadian","addPolygon","addDisc","newCenter","addSector","addSphere","segmentsV","list","addTorus","bigRadius","addOctahedron","addBezier","deltaT","newV0","newV1","newV2","newV3","t","a","b","c","d","addSpline","spline","index","knotSize","numPoints","getPoints","forEach","v","crossColor","r","g","numKnots","getKnotCount","knots","knot","clone","addMesh","addIndexedMesh","indices","cclegacy","internal"],"mappings":"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"}