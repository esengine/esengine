"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.typedArrayDump = void 0;
class TypedArrayDump {
    encode(object, data, opts) {
        // @ts-ignore
        if (object instanceof BigInt64Array) {
            // @ts-ignore
            data.value = new BigInt64Array(object);
        }
        // @ts-ignore
        else if (object instanceof BigUint64Array) {
            // @ts-ignore
            data.value = new BigUint64Array(object);
        }
        // @ts-ignore
        else if (object instanceof Float32Array) {
            // @ts-ignore
            data.value = new Float32Array(object);
        }
        // @ts-ignore
        else if (object instanceof Float64Array) {
            // @ts-ignore
            data.value = new Float64Array(object);
        }
        // @ts-ignore
        else if (object instanceof Int8Array) {
            // @ts-ignore
            data.value = new Int8Array(object);
        }
        // @ts-ignore
        else if (object instanceof Int16Array) {
            // @ts-ignore
            data.value = new Int16Array(object);
        }
        // @ts-ignore
        else if (object instanceof Int32Array) {
            // @ts-ignore
            data.value = new Int32Array(object);
        }
        // @ts-ignore
        else if (object instanceof Uint8Array) {
            // @ts-ignore
            data.value = new Uint8Array(object);
        }
        // @ts-ignore
        else if (object instanceof Uint8ClampedArray) {
            // @ts-ignore
            data.value = new Uint8ClampedArray(object);
        }
        // @ts-ignore
        else if (object instanceof Uint16Array) {
            // @ts-ignore
            data.value = new Uint16Array(object);
        }
        // @ts-ignore
        else if (object instanceof Uint32Array) {
            // @ts-ignore
            data.value = new Uint32Array(object);
        }
    }
    decode(data, info, dump, opts) {
        // @ts-ignore
        if (BigInt64Array && dump.value instanceof BigInt64Array) {
            // @ts-ignore
            data[info.key] = new BigInt64Array(dump.value);
        }
        // @ts-ignore
        else if (BigUint64Array && dump.value instanceof BigUint64Array) {
            // @ts-ignore
            data[info.key] = new BigUint64Array(dump.value);
        }
        // @ts-ignore
        else if (Float32Array && dump.value instanceof Float32Array) {
            // @ts-ignore
            data[info.key] = new Float32Array(dump.value);
        }
        // @ts-ignore
        else if (Float64Array && dump.value instanceof Float64Array) {
            // @ts-ignore
            data[info.key] = new Float64Array(dump.value);
        }
        // @ts-ignore
        else if (Int8Array && dump.value instanceof Int8Array) {
            // @ts-ignore
            data[info.key] = new Int8Array(dump.value);
        }
        // @ts-ignore
        else if (Int16Array && dump.value instanceof Int16Array) {
            // @ts-ignore
            data[info.key] = new Int16Array(dump.value);
        }
        // @ts-ignore
        else if (Int32Array && dump.value instanceof Int32Array) {
            // @ts-ignore
            data[info.key] = new Int32Array(dump.value);
        }
        // @ts-ignore
        else if (Uint8Array && dump.value instanceof Uint8Array) {
            // @ts-ignore
            data[info.key] = new Uint8Array(dump.value);
        }
        // @ts-ignore
        else if (Uint8ClampedArray && dump.value instanceof Uint8ClampedArray) {
            // @ts-ignore
            data[info.key] = new Uint8ClampedArray(dump.value);
        }
        // @ts-ignore
        else if (Uint16Array && dump.value instanceof Uint16Array) {
            // @ts-ignore
            data[info.key] = new Uint16Array(dump.value);
        }
        // @ts-ignore
        else if (Uint32Array && dump.value instanceof Uint32Array) {
            // @ts-ignore
            data[info.key] = new Uint32Array(dump.value);
        }
    }
}
exports.typedArrayDump = new TypedArrayDump();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWQtYXJyYXktZHVtcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb3JlL3NjZW5lL3NjZW5lLXByb2Nlc3Mvc2VydmljZS9kdW1wL3R5cGVzL3R5cGVkLWFycmF5LWR1bXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBTUEsTUFBTSxjQUFjO0lBQ1QsTUFBTSxDQUFDLE1BQVcsRUFBRSxJQUFlLEVBQUUsSUFBVTtRQUNsRCxhQUFhO1FBQ2IsSUFBSSxNQUFNLFlBQVksYUFBYSxFQUFFLENBQUM7WUFDbEMsYUFBYTtZQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0MsQ0FBQztRQUNELGFBQWE7YUFDUixJQUFJLE1BQU0sWUFBWSxjQUFjLEVBQUUsQ0FBQztZQUN4QyxhQUFhO1lBQ2IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBQ0QsYUFBYTthQUNSLElBQUksTUFBTSxZQUFZLFlBQVksRUFBRSxDQUFDO1lBQ3RDLGFBQWE7WUFDYixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFDRCxhQUFhO2FBQ1IsSUFBSSxNQUFNLFlBQVksWUFBWSxFQUFFLENBQUM7WUFDdEMsYUFBYTtZQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUMsQ0FBQztRQUNELGFBQWE7YUFDUixJQUFJLE1BQU0sWUFBWSxTQUFTLEVBQUUsQ0FBQztZQUNuQyxhQUFhO1lBQ2IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2QyxDQUFDO1FBQ0QsYUFBYTthQUNSLElBQUksTUFBTSxZQUFZLFVBQVUsRUFBRSxDQUFDO1lB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ZnJvbSAnLi4vLi4vLi4vLi4vQHR5cGVzL3B1YmxpYyc7XHJcblxyXG5pbXBvcnQgeyBEdW1wSW50ZXJmYWNlIH0gZnJvbSAnLi9kdW1wLWludGVyZmFjZSc7XHJcblxyXG5jbGFzcyBUeXBlZEFycmF5RHVtcCBpbXBsZW1lbnRzIER1bXBJbnRlcmZhY2Uge1xyXG4gICAgcHVibGljIGVuY29kZShvYmplY3Q6IGFueSwgZGF0YTogSVByb3BlcnR5LCBvcHRzPzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBCaWdJbnQ2NEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS52YWx1ZSA9IG5ldyBCaWdJbnQ2NEFycmF5KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGEudmFsdWUgPSBuZXcgQmlnVWludDY0QXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGEudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gbmV3IEZsb2F0NjRBcnJheShvYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS52YWx1ZSA9IG5ldyBJbnQ4QXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEludDE2QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gbmV3IEludDE2QXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEludDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gbmV3IEludDMyQXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gbmV3IFVpbnQ4QXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YS52YWx1ZSA9IG5ldyBVaW50OENsYW1wZWRBcnJheShvYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgVWludDE2QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhLnZhbHVlID0gbmV3IFVpbnQxNkFycmF5KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBVaW50MzJBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGEudmFsdWUgPSBuZXcgVWludDMyQXJyYXkob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlY29kZShkYXRhOiBhbnksIGluZm86IGFueSwgZHVtcDogYW55LCBvcHRzPzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGlmIChCaWdJbnQ2NEFycmF5ICYmIGR1bXAudmFsdWUgaW5zdGFuY2VvZiBCaWdJbnQ2NEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YVtpbmZvLmtleV0gPSBuZXcgQmlnSW50NjRBcnJheShkdW1wLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKEJpZ1VpbnQ2NEFycmF5ICYmIGR1bXAudmFsdWUgaW5zdGFuY2VvZiBCaWdVaW50NjRBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGFbaW5mby5rZXldID0gbmV3IEJpZ1VpbnQ2NEFycmF5KGR1bXAudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZWxzZSBpZiAoRmxvYXQzMkFycmF5ICYmIGR1bXAudmFsdWUgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhW2luZm8ua2V5XSA9IG5ldyBGbG9hdDMyQXJyYXkoZHVtcC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChGbG9hdDY0QXJyYXkgJiYgZHVtcC52YWx1ZSBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGFbaW5mby5rZXldID0gbmV3IEZsb2F0NjRBcnJheShkdW1wLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKEludDhBcnJheSAmJiBkdW1wLnZhbHVlIGluc3RhbmNlb2YgSW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YVtpbmZvLmtleV0gPSBuZXcgSW50OEFycmF5KGR1bXAudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZWxzZSBpZiAoSW50MTZBcnJheSAmJiBkdW1wLnZhbHVlIGluc3RhbmNlb2YgSW50MTZBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGFbaW5mby5rZXldID0gbmV3IEludDE2QXJyYXkoZHVtcC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChJbnQzMkFycmF5ICYmIGR1bXAudmFsdWUgaW5zdGFuY2VvZiBJbnQzMkFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YVtpbmZvLmtleV0gPSBuZXcgSW50MzJBcnJheShkdW1wLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKFVpbnQ4QXJyYXkgJiYgZHVtcC52YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhW2luZm8ua2V5XSA9IG5ldyBVaW50OEFycmF5KGR1bXAudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZWxzZSBpZiAoVWludDhDbGFtcGVkQXJyYXkgJiYgZHVtcC52YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZGF0YVtpbmZvLmtleV0gPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoZHVtcC52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBlbHNlIGlmIChVaW50MTZBcnJheSAmJiBkdW1wLnZhbHVlIGluc3RhbmNlb2YgVWludDE2QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBkYXRhW2luZm8ua2V5XSA9IG5ldyBVaW50MTZBcnJheShkdW1wLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGVsc2UgaWYgKFVpbnQzMkFycmF5ICYmIGR1bXAudmFsdWUgaW5zdGFuY2VvZiBVaW50MzJBcnJheSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGRhdGFbaW5mby5rZXldID0gbmV3IFVpbnQzMkFycmF5KGR1bXAudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHR5cGVkQXJyYXlEdW1wID0gbmV3IFR5cGVkQXJyYXlEdW1wKCk7XHJcbiJdfQ==