"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cors = cors;
/**
 * 手动设置 CORS 头
 * @param req
 * @param res
 * @param next
 */
function cors(req, res, next) {
    res.header('Access-Control-Allow-Origin', '*'); // 允许所有域
    res.header('Access-Control-Allow-Methods', 'GET,POST,PUT,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Cache-Control');
    res.header('Access-Control-Expose-Headers', 'Content-Type, Cache-Control'); // 允许客户端访问这些头部
    // 预检请求直接返回 204
    if (req.method === 'OPTIONS') {
        return res.sendStatus(204);
    }
    next();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvdXRpbHMvY29ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVFBLG9CQVlDO0FBbEJEOzs7OztHQUtHO0FBQ0gsU0FBZ0IsSUFBSSxDQUFDLEdBQVksRUFBRSxHQUFhLEVBQUUsSUFBa0I7SUFDaEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVE7SUFDeEQsR0FBRyxDQUFDLE1BQU0sQ0FBQyw4QkFBOEIsRUFBRSw2QkFBNkIsQ0FBQyxDQUFDO0lBQzFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsOEJBQThCLEVBQUUsNENBQTRDLENBQUMsQ0FBQztJQUN6RixHQUFHLENBQUMsTUFBTSxDQUFDLCtCQUErQixFQUFFLDZCQUE2QixDQUFDLENBQUMsQ0FBQyxjQUFjO0lBRTFGLGVBQWU7SUFDZixJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFLENBQUM7UUFDM0IsT0FBTyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFJLEVBQUUsQ0FBQztBQUNYLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSwgTmV4dEZ1bmN0aW9uIH0gZnJvbSAnZXhwcmVzcyc7XHJcblxyXG4vKipcclxuICog5omL5Yqo6K6+572uIENPUlMg5aS0XHJcbiAqIEBwYXJhbSByZXFcclxuICogQHBhcmFtIHJlc1xyXG4gKiBAcGFyYW0gbmV4dFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvcnMocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcclxuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7IC8vIOWFgeiuuOaJgOacieWfn1xyXG4gICAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsUE9TVCxQVVQsREVMRVRFLE9QVElPTlMnKTtcclxuICAgIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uLCBDYWNoZS1Db250cm9sJyk7XHJcbiAgICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVycycsICdDb250ZW50LVR5cGUsIENhY2hlLUNvbnRyb2wnKTsgLy8g5YWB6K645a6i5oi356uv6K6/6Zeu6L+Z5Lqb5aS06YOoXHJcblxyXG4gICAgLy8g6aKE5qOA6K+35rGC55u05o6l6L+U5ZueIDIwNFxyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cygyMDQpO1xyXG4gICAgfVxyXG5cclxuICAgIG5leHQoKTtcclxufVxyXG4iXX0=