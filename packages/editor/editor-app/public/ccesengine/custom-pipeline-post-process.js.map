{"version":3,"file":"custom-pipeline-post-process.js","sources":["../../../cocos/rendering/post-process/utils/pass-context.ts","../../../cocos/rendering/post-process/passes/base-pass.ts","../../../cocos/rendering/post-process/passes/forward-final-pass.ts","../../../cocos/rendering/post-process/passes/forward-pass.ts","../../../cocos/rendering/post-process/components/post-process-setting.ts","../../../cocos/rendering/post-process/components/taa.ts","../../../cocos/rendering/post-process/components/taa-mask.ts","../../../cocos/rendering/post-process/passes/setting-pass.ts","../../../cocos/rendering/post-process/passes/taa-pass.ts","../../../cocos/rendering/post-process/components/fsr.ts","../../../cocos/rendering/post-process/passes/fsr-pass.ts","../../../cocos/rendering/post-process/components/blit-screen.ts","../../../cocos/rendering/post-process/passes/blit-screen-pass.ts","../../../cocos/rendering/post-process/passes/shadow-pass.ts","../../../cocos/rendering/post-process/components/color-grading.ts","../../../cocos/rendering/post-process/components/bloom.ts","../../../cocos/rendering/post-process/components/hbao.ts","../../../cocos/rendering/post-process/components/dof.ts","../../../cocos/rendering/post-process/passes/hbao-pass.ts","../../../cocos/rendering/post-process/passes/color-grading-pass.ts","../../../cocos/rendering/post-process/passes/bloom-pass.ts","../../../cocos/rendering/post-process/components/fxaa.ts","../../../cocos/rendering/post-process/passes/fxaa-pass.ts","../../../cocos/rendering/post-process/passes/float-output-process-pass.ts","../../../cocos/rendering/post-process/passes/forward-transparency-pass.ts","../../../cocos/rendering/post-process/passes/forward-transparency-simple-pass.ts","../../../cocos/rendering/post-process/passes/skin-pass.ts","../../../cocos/rendering/post-process/passes/post-final-pass.ts","../../../cocos/rendering/post-process/passes/dof-pass.ts","../../../cocos/rendering/post-process/post-process-builder.ts","../../../cocos/rendering/post-process/index.ts"],"sourcesContent":["import { EDITOR } from 'internal:constants';\r\n\r\nimport { LightInfo, QueueHint, ResourceResidency, SceneFlags } from '../../custom/types';\r\nimport { ClearFlagBit, Color, Format, LoadOp, Rect, StoreOp, Viewport } from '../../../gfx';\r\nimport { Pipeline, RenderPassBuilder, RenderQueueBuilder } from '../../custom/pipeline';\r\nimport { Camera, SkyBoxFlagValue } from '../../../render-scene/scene';\r\nimport { Material } from '../../../asset/assets';\r\nimport { PostProcess } from '../components';\r\nimport { getRenderArea } from '../../custom/define';\r\nimport { Vec4, geometry } from '../../../core';\r\n\r\nconst sphere = geometry.Sphere.create(0, 0, 0, 1);\r\nconst boundingBox = new geometry.AABB();\r\nconst rangedDirLightBoundingBox = new geometry.AABB(0.0, 0.0, 0.0, 0.5, 0.5, 0.5);\r\nexport class PassContext {\r\n    clearFlag: ClearFlagBit = ClearFlagBit.COLOR;\r\n    clearColor = new Color();\r\n    clearDepthColor = new Color();\r\n    ppl: Pipeline| undefined;\r\n    camera: Camera| undefined;\r\n    material: Material| undefined;\r\n    pass: RenderPassBuilder| undefined;\r\n    rasterWidth = 0;\r\n    rasterHeight = 0;\r\n    layoutName = '';\r\n\r\n    shadingScale = 1;\r\n    viewport = new Rect();\r\n    passViewport = new Rect();\r\n\r\n    passPathName = '';\r\n    passVersion = 0;\r\n\r\n    isFinalCamera = false;\r\n    isFinalPass = false;\r\n\r\n    depthSlotName = '';\r\n\r\n    shadowPass: any = undefined;\r\n    forwardPass: any = undefined;\r\n    postProcess: PostProcess | undefined;\r\n\r\n    maxSpotLights = 0xFFFFFFFF;\r\n    maxSphereLights = 0xFFFFFFFF;\r\n    maxPointLights = 0xFFFFFFFF;\r\n    maxRangedDirLights = 0xFFFFFFFF;\r\n\r\n    setClearFlag (clearFlag: ClearFlagBit): PassContext {\r\n        this.clearFlag = clearFlag;\r\n        return this;\r\n    }\r\n\r\n    setClearColor (x: number, y: number, z: number, w: number): PassContext {\r\n        Vec4.set(this.clearColor, x, y, z, w);\r\n        return this;\r\n    }\r\n\r\n    setClearDepthColor (x: number, y: number, z: number, w: number): PassContext {\r\n        Vec4.set(this.clearDepthColor, x, y, z, w);\r\n        return this;\r\n    }\r\n\r\n    version (): PassContext {\r\n        if (!EDITOR) {\r\n            this.passPathName += `_${this.pass!.name}_${this.layoutName}`;\r\n            this.pass!.setVersion(this.passPathName, this.passVersion);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    clearBlack (): void {\r\n        this.clearFlag = ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, 0, 0, 0, 1);\r\n    }\r\n\r\n    addRenderPass (layoutName: string, passName: string): PassContext {\r\n        const passViewport = this.passViewport;\r\n\r\n        const pass = this.ppl!.addRenderPass(passViewport.width, passViewport.height, layoutName);\r\n        pass.name = passName;\r\n        this.pass = pass;\r\n        this.layoutName = layoutName;\r\n\r\n        this.rasterWidth = passViewport.width;\r\n        this.rasterHeight = passViewport.height;\r\n\r\n        pass.setViewport(new Viewport(passViewport.x, passViewport.y, passViewport.width, passViewport.height));\r\n\r\n        return this;\r\n    }\r\n\r\n    addSceneLights (queue: RenderQueueBuilder, camera: Camera, flags: SceneFlags = SceneFlags.BLEND): void {\r\n        if (this.maxPointLights === 0\r\n            && this.maxSphereLights === 0\r\n            && this.maxSpotLights === 0\r\n            && this.maxRangedDirLights === 0) {\r\n            return;\r\n        }\r\n        const scene = camera.scene!;\r\n        const spotLights = scene.spotLights;\r\n        const sphereLights = scene.sphereLights;\r\n        const pointLights = scene.pointLights;\r\n        const rangedDirLights = scene.rangedDirLights;\r\n\r\n        const numSpotLights = Math.min(spotLights.length, this.maxSpotLights);\r\n        const numSphereLights = Math.min(sphereLights.length, this.maxSphereLights);\r\n        const numPointLights = Math.min(pointLights.length, this.maxPointLights);\r\n        const numRangedDirLights = Math.min(rangedDirLights.length, this.maxRangedDirLights);\r\n\r\n        for (let i = 0; i < numSpotLights; i++) {\r\n            const light = spotLights[i];\r\n            if (light.baked) {\r\n                continue;\r\n            }\r\n            geometry.Sphere.set(sphere, light.position.x, light.position.y, light.position.z, light.range);\r\n            if (geometry.intersect.sphereFrustum(sphere, camera.frustum)) {\r\n                queue.addSceneOfCamera(camera, new LightInfo(light), flags);\r\n            }\r\n        }\r\n        // sphere lights\r\n        for (let i = 0; i < numSphereLights; i++) {\r\n            const light = sphereLights[i];\r\n            if (light.baked) {\r\n                continue;\r\n            }\r\n            geometry.Sphere.set(sphere, light.position.x, light.position.y, light.position.z, light.range);\r\n            if (geometry.intersect.sphereFrustum(sphere, camera.frustum)) {\r\n                queue.addSceneOfCamera(camera, new LightInfo(light), flags);\r\n            }\r\n        }\r\n        // point lights\r\n        for (let i = 0; i < numPointLights; i++) {\r\n            const light = pointLights[i];\r\n            if (light.baked) {\r\n                continue;\r\n            }\r\n            geometry.Sphere.set(sphere, light.position.x, light.position.y, light.position.z, light.range);\r\n            if (geometry.intersect.sphereFrustum(sphere, camera.frustum)) {\r\n                queue.addSceneOfCamera(camera, new LightInfo(light), flags);\r\n            }\r\n        }\r\n        // ranged dir lights\r\n        for (let i = 0; i < numRangedDirLights; i++) {\r\n            const light = rangedDirLights[i];\r\n            geometry.AABB.transform(boundingBox, rangedDirLightBoundingBox, light.node!.getWorldMatrix());\r\n            if (geometry.intersect.aabbFrustum(boundingBox, camera.frustum)) {\r\n                queue.addSceneOfCamera(camera, new LightInfo(light), flags);\r\n            }\r\n        }\r\n    }\r\n\r\n    updateViewPort (): void {\r\n        const camera = this.camera;\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        let shadingScale = 1;\r\n        if (this.postProcess && (!EDITOR || this.postProcess.enableShadingScaleInEditor)) {\r\n            shadingScale *= this.postProcess.shadingScale;\r\n        }\r\n        this.shadingScale = shadingScale;\r\n\r\n        const area = getRenderArea(camera, camera.window.width * shadingScale, camera.window.height * shadingScale, null, 0, this.viewport);\r\n        area.width = Math.floor(area.width);\r\n        area.height = Math.floor(area.height);\r\n    }\r\n    updatePassViewPort (shadingScale = 1, offsetScale = 0): PassContext {\r\n        this.passViewport.width = this.viewport.width * shadingScale;\r\n        this.passViewport.height = this.viewport.height * shadingScale;\r\n\r\n        this.passViewport.x = this.viewport.x * offsetScale;\r\n        this.passViewport.y = this.viewport.y * offsetScale;\r\n        return this;\r\n    }\r\n\r\n    // setViewport (x: number, y: number, w: number, h: number) {\r\n    //     this.pass!.setViewport(new Viewport(x, y, w, h));\r\n    //     return this;\r\n    // }\r\n\r\n    addRasterView (name: string, format: Format, offscreen = true, residency: ResourceResidency = ResourceResidency.MANAGED): PassContext {\r\n        const ppl = this.ppl;\r\n        const camera = this.camera;\r\n        const pass = this.pass;\r\n        if (!ppl || !camera || !pass) {\r\n            return this;\r\n        }\r\n\r\n        if (!ppl.containsResource(name)) {\r\n            if (format === Format.DEPTH_STENCIL) {\r\n                ppl.addDepthStencil(name, format, this.rasterWidth, this.rasterHeight, ResourceResidency.MANAGED);\r\n            } else if (offscreen) {\r\n                ppl.addRenderTarget(name, format, this.rasterWidth, this.rasterHeight, residency || ResourceResidency.MANAGED);\r\n            } else {\r\n                ppl.addRenderWindow(name, format, this.rasterWidth, this.rasterHeight, camera.window);\r\n            }\r\n        }\r\n\r\n        if (format !== Format.DEPTH_STENCIL) {\r\n            if (!offscreen) {\r\n                ppl.updateRenderWindow(name, camera.window);\r\n            } else {\r\n                ppl.updateRenderTarget(name, this.rasterWidth, this.rasterHeight);\r\n            }\r\n        } else {\r\n            ppl.updateDepthStencil(name, this.rasterWidth, this.rasterHeight);\r\n        }\r\n\r\n        // let view: RasterView;\r\n        if (format === Format.DEPTH_STENCIL) {\r\n            const clearFlag = this.clearFlag & ClearFlagBit.DEPTH_STENCIL;\r\n            let loadOp = LoadOp.CLEAR;\r\n            if (clearFlag === ClearFlagBit.NONE) {\r\n                loadOp = LoadOp.LOAD;\r\n            }\r\n\r\n            pass.addDepthStencil(name, loadOp, StoreOp.STORE, this.clearDepthColor.x, this.clearDepthColor.y, clearFlag);\r\n        } else {\r\n            const clearColor = new Color();\r\n            clearColor.copy(this.clearColor);\r\n\r\n            const clearFlag = this.clearFlag & ClearFlagBit.COLOR;\r\n            let loadOp = LoadOp.CLEAR;\r\n            if (clearFlag === ClearFlagBit.NONE && !(this.clearFlag & SkyBoxFlagValue.VALUE)) {\r\n                loadOp = LoadOp.LOAD;\r\n            } else if (this.clearFlag & SkyBoxFlagValue.VALUE) {\r\n                clearColor.set(0, 0, 0, 1);\r\n            }\r\n            pass.addRenderTarget(name, loadOp, StoreOp.STORE, clearColor);\r\n        }\r\n        return this;\r\n    }\r\n    setPassInput (inputName: string, shaderName: string): PassContext {\r\n        if (this.ppl!.containsResource(inputName)) {\r\n            this.pass!.addTexture(inputName, shaderName);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    blitScreen (passIdx = 0): PassContext {\r\n        this.pass!.addQueue(QueueHint.RENDER_TRANSPARENT).addCameraQuad(\r\n            this.camera!,\r\nthis.material!,\r\npassIdx,\r\nSceneFlags.NONE,\r\n        );\r\n        return this;\r\n    }\r\n}\r\n\r\nexport const passContext = new PassContext();\r\n","import { EDITOR } from 'internal:constants';\r\n\r\nimport { Material } from '../../../asset/assets';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { BasicPipeline, Pipeline, PipelineRuntime } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { Address, Filter, Format, Sampler, SamplerInfo } from '../../../gfx';\r\nimport { supportsRGBA16HalfFloatTexture } from '../../define';\r\nimport { cclegacy, macro } from '../../../core';\r\n\r\nlet _BasePassID = 0;\r\nlet _pointSampler: Sampler| null = null;\r\nconst _samplerPointInfo = new SamplerInfo(\r\n    Filter.POINT,\r\n    Filter.POINT,\r\n    Filter.NONE,\r\n    Address.CLAMP,\r\n    Address.CLAMP,\r\n    Address.CLAMP,\r\n);\r\n\r\nexport function getRTFormatBeforeToneMapping (ppl: BasicPipeline): Format {\r\n    const useFloatOutput = ppl.getMacroBool('CC_USE_FLOAT_OUTPUT');\r\n    return ppl.pipelineSceneData.isHDR && useFloatOutput && supportsRGBA16HalfFloatTexture(ppl.device) ? Format.RGBA16F : Format.RGBA8;\r\n}\r\nexport function forceEnableFloatOutput (ppl: PipelineRuntime): boolean {\r\n    let enabled = ppl.getMacroBool('CC_USE_FLOAT_OUTPUT');\r\n    if (ppl.pipelineSceneData.isHDR && !enabled) {\r\n        const supportFloatOutput = supportsRGBA16HalfFloatTexture(ppl.device);\r\n        ppl.setMacroBool('CC_USE_FLOAT_OUTPUT', supportFloatOutput);\r\n        macro.ENABLE_FLOAT_OUTPUT = supportFloatOutput;\r\n        enabled = supportFloatOutput;\r\n    }\r\n\r\n    return enabled;\r\n}\r\n\r\nexport function disablePostProcessForDebugView (): boolean {\r\n    const debugView = cclegacy.director.root.debugView;\r\n    return debugView.singleMode as number > 0;\r\n}\r\n\r\nexport function getShadowMapSampler (): Sampler | undefined {\r\n    if (!_pointSampler) {\r\n        const director = cclegacy.director;\r\n        const pipeline = director.root.pipeline;\r\n        const device = pipeline.device;\r\n        _pointSampler = device.getSampler(_samplerPointInfo);\r\n    }\r\n    return _pointSampler || undefined;\r\n}\r\n\r\nexport abstract class BasePass {\r\n    abstract name: string;\r\n    effectName = 'pipeline/post-process/blit-screen';\r\n\r\n    _id = 0;\r\n    constructor () {\r\n        this._id = _BasePassID++;\r\n    }\r\n\r\n    context = passContext;\r\n    getCameraUniqueID = getCameraUniqueID;\r\n\r\n    // private _materialMap: Map<Camera, Material> = new Map()\r\n\r\n    _material: Material | undefined;\r\n    get material (): Material {\r\n        const effectReloaded = false;\r\n        // if (EDITOR && this._material) {\r\n        //     const effect = builtinResMgr.get(this.effectName);\r\n        //     effectReloaded = effect && this._material.effectAsset !== effect;\r\n        // }\r\n\r\n        if (!this._material || effectReloaded) {\r\n            const mat = new Material();\r\n            mat._uuid = `${this.name}-${this.effectName}-material`;\r\n            mat.initialize({ effectName: this.effectName });\r\n            this._material = mat;\r\n        }\r\n\r\n        let material: Material | undefined;\r\n        // if (EDITOR) {\r\n        //     if (passUtils.camera) {\r\n        //         material = this._materialMap.get(passUtils.camera);\r\n        //         if (!material || material.parent !== this._material) {\r\n        //             material = new MaterialInstance({\r\n        //                 parent: this._material,\r\n        //             });\r\n        //             this._materialMap.set(passUtils.camera, material);\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        return material || this._material;\r\n    }\r\n\r\n    enable = true;\r\n    outputNames: string[] = [];\r\n\r\n    lastPass: BasePass | undefined;\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        const name = this.outputNames[index] + this.name;\r\n        return `${name}_${this._id}_${getCameraUniqueID(camera)}`;\r\n    }\r\n\r\n    enableInAllEditorCamera = false;\r\n    checkEnable (camera: Camera): boolean {\r\n        return this.enable;\r\n    }\r\n\r\n    onGlobalPipelineStateChanged?(): void;\r\n\r\n    renderProfiler (camera): void {\r\n        if (passContext.isFinalCamera && !EDITOR) {\r\n            passContext.pass!.showStatistics = true;\r\n        }\r\n    }\r\n\r\n    abstract render (camera: Camera, ppl: Pipeline): any;\r\n}\r\n","import { Vec4 } from '../../../core';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera, SkyBoxFlagValue } from '../../../render-scene/scene';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass } from './base-pass';\r\n\r\nexport class ForwardFinalPass extends BasePass {\r\n    name = 'ForwardFinalPass';\r\n    outputNames = ['ForwardFinalColor'];\r\n\r\n    enableInAllEditorCamera = true;\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        if (!this.lastPass) {\r\n            return;\r\n        }\r\n\r\n        passContext.clearFlag = camera.clearFlag & ClearFlagBit.COLOR  | (camera.clearFlag & SkyBoxFlagValue.VALUE);\r\n        Vec4.set(passContext.clearColor, camera.clearColor.x, camera.clearColor.y, camera.clearColor.z, camera.clearColor.w);\r\n\r\n        passContext.material = this.material;\r\n\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        const input0 = this.lastPass.slotName(camera, 0);\r\n        const slot0 = this.slotName(camera, 0);\r\n\r\n        const isOffScreen = false;//director.root!.mainWindow !== camera.window;\r\n\r\n        const fb = camera.window.framebuffer;\r\n        const ct = fb && fb.colorTextures[0];\r\n        const format = ct ? ct.format : Format.RGBA8;\r\n\r\n        const shadingScale = passContext.shadingScale;\r\n        passContext\r\n            .updatePassViewPort(1 / shadingScale, 1 / shadingScale)\r\n            .addRenderPass('post-process', `${this.name}${cameraID}`)\r\n            .setPassInput(input0, 'inputTexture')\r\n            .addRasterView(slot0, format, isOffScreen)\r\n            .blitScreen(0);\r\n\r\n        this.renderProfiler(camera);\r\n    }\r\n}\r\n","import { Vec4 } from '../../../core';\r\n\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera, ShadowType, SkyBoxFlagValue } from '../../../render-scene/scene';\r\nimport { LightInfo, QueueHint, SceneFlags } from '../../custom/types';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass, getRTFormatBeforeToneMapping, getShadowMapSampler } from './base-pass';\r\nimport { ShadowPass } from './shadow-pass';\r\n\r\nexport class ForwardPass extends BasePass {\r\n    name = 'ForwardPass';\r\n    outputNames = ['ForwardColor', 'ForwardDS'];\r\n\r\n    enableInAllEditorCamera = true;\r\n    depthBufferShadingScale = 1;\r\n\r\n    calcDepthSlot (camera: Camera): void {\r\n        const depthSlotName = !!passContext.depthSlotName;\r\n        let canUsePrevDepth = !(camera.clearFlag & ClearFlagBit.DEPTH_STENCIL);\r\n        canUsePrevDepth = canUsePrevDepth && passContext.shadingScale === this.depthBufferShadingScale;\r\n        if (canUsePrevDepth) {\r\n            if (!depthSlotName) passContext.depthSlotName = super.slotName(camera, 1);\r\n            return;\r\n        }\r\n        this.depthBufferShadingScale = passContext.shadingScale;\r\n\r\n        passContext.depthSlotName = super.slotName(camera, 1);\r\n    }\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        if (index === 1) {\r\n            return passContext.depthSlotName;\r\n        }\r\n\r\n        return super.slotName(camera, index);\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        passContext.clearFlag = ClearFlagBit.COLOR | (camera.clearFlag & ClearFlagBit.DEPTH_STENCIL) | (camera.clearFlag & SkyBoxFlagValue.VALUE);\r\n        Vec4.set(passContext.clearColor, 0, 0, 0, 0);\r\n        Vec4.set(passContext.clearDepthColor, camera.clearDepth, camera.clearStencil, 0, 0);\r\n\r\n        this.calcDepthSlot(camera);\r\n\r\n        const slot0 = this.slotName(camera, 0);\r\n        const slot1 = this.slotName(camera, 1);\r\n\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const isOffScreen = true;\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass('default', `${this.name}_${cameraID}`)\r\n            .addRasterView(slot0, getRTFormatBeforeToneMapping(ppl), isOffScreen)\r\n            .addRasterView(slot1, Format.DEPTH_STENCIL, isOffScreen)\r\n            .version();\r\n\r\n        const pass = passContext.pass!;\r\n        const shadowPass = passContext.shadowPass as ShadowPass;\r\n        if (shadowPass) {\r\n            for (const dirShadowName of shadowPass.mainLightShadows) {\r\n                if (ppl.containsResource(dirShadowName)) {\r\n                    pass.addTexture(dirShadowName, 'cc_shadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n            for (const spotShadowName of shadowPass.spotLightShadows) {\r\n                if (ppl.containsResource(spotShadowName)) {\r\n                    pass.addTexture(spotShadowName, 'cc_spotShadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n        }\r\n        const forwardQueue = pass.addQueue(QueueHint.RENDER_OPAQUE);\r\n        forwardQueue.addSceneOfCamera(\r\n            camera,\r\n            new LightInfo(),\r\n            SceneFlags.OPAQUE_OBJECT | SceneFlags.CUTOUT_OBJECT\r\n             | SceneFlags.GEOMETRY,\r\n        );\r\n        const forwardAddQueue = pass.addQueue(QueueHint.RENDER_TRANSPARENT, 'forward-add');\r\n        passContext.addSceneLights(forwardAddQueue, camera);\r\n        const shadowInfo = ppl.pipelineSceneData.shadows;\r\n        if (camera.scene?.mainLight && shadowInfo.enabled && shadowInfo.type === ShadowType.Planar) {\r\n            pass.addQueue(QueueHint.RENDER_TRANSPARENT, 'planar-shadow')\r\n                .addSceneOfCamera(\r\n                    camera,\r\n                    new LightInfo(camera.scene?.mainLight),\r\n                    SceneFlags.TRANSPARENT_OBJECT | SceneFlags.SHADOW_CASTER\r\n                    | SceneFlags.GEOMETRY,\r\n                );\r\n        }\r\n        passContext.forwardPass = this;\r\n    }\r\n}\r\n","import { ccclass, executeInEditMode, requireComponent } from '../../../core/data/decorators';\r\nimport { Component } from '../../../scene-graph';\r\nimport { PostProcess } from './post-process';\r\n\r\n@ccclass('cc.PostProcessSetting')\r\n@requireComponent(PostProcess)\r\n@executeInEditMode\r\nexport class PostProcessSetting extends Component {\r\n    onEnable (): void {\r\n        const pp = this.getComponent(PostProcess);\r\n        pp?.addSetting(this);\r\n    }\r\n    onDisable (): void {\r\n        const pp = this.getComponent(PostProcess);\r\n        pp?.removeSetting(this);\r\n    }\r\n}\r\n","import { property, serializable } from '../../../core/data/class-decorator';\r\nimport { ccclass, disallowMultiple, executeInEditMode, help, menu, range, slide, tooltip } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.TAA')\r\n@help('cc.TAA')\r\n@menu('PostProcess/TAA')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class TAA extends PostProcessSetting {\r\n    @serializable\r\n    protected _sampleScale = 1;\r\n\r\n    @tooltip('i18n:taa.sampleScale')\r\n    @slide\r\n    @range([0.01, 5, 0.01])\r\n    @property\r\n    get sampleScale (): number {\r\n        return this._sampleScale;\r\n    }\r\n    set sampleScale (v: number) {\r\n        this._sampleScale = v;\r\n    }\r\n\r\n    @serializable\r\n    protected _feedback = 0.95;\r\n    @tooltip('i18n:taa.feedback')\r\n    @slide\r\n    @range([0.0, 1, 0.01])\r\n    @property\r\n    get feedback (): number {\r\n        return this._feedback;\r\n    }\r\n    set feedback (v: number) {\r\n        this._feedback = v;\r\n    }\r\n}\r\n","import { RenderTexture } from '../../../asset/assets';\r\nimport { warn } from '../../../core';\r\nimport { property } from '../../../core/data/class-decorator';\r\nimport { ccclass, menu } from '../../../core/data/decorators';\r\nimport { game } from '../../../game';\r\nimport { Camera } from '../../../misc';\r\nimport { Component } from '../../../scene-graph';\r\n\r\n@ccclass('TAAMask')\r\n@menu('PostProcess/TAAMask')\r\nexport class TAAMask extends Component {\r\n    @property(Camera)\r\n    maskCamera: Camera | undefined;\r\n\r\n    _mask: RenderTexture | undefined;\r\n\r\n    get mask (): RenderTexture | undefined {\r\n        if (!this.maskCamera || !this.maskCamera.enabledInHierarchy) {\r\n            return undefined;\r\n        }\r\n        if (!this.enabledInHierarchy) {\r\n            return undefined;\r\n        }\r\n\r\n        return this._mask;\r\n    }\r\n\r\n    start (): void {\r\n        if (!this.maskCamera) {\r\n            warn('Can not find a Camera for TAAMask');\r\n            return;\r\n        }\r\n\r\n        const tex = new RenderTexture();\r\n        tex.reset({\r\n            width: game.canvas!.width,\r\n            height: game.canvas!.height,\r\n        });\r\n\r\n        this._mask = tex;\r\n        this.maskCamera.targetTexture = tex;\r\n    }\r\n}\r\n","import { Camera } from '../../../render-scene/scene';\r\nimport { PostProcessSetting } from '../components/post-process-setting';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass } from './base-pass';\r\n\r\nexport function getSetting<T extends PostProcessSetting> (settingClass: new () => T): T {\r\n    const cls: typeof PostProcessSetting = settingClass as any;\r\n    const setting = passContext.postProcess && passContext.postProcess.getSetting(cls) as T;\r\n    return setting!;\r\n}\r\n\r\nexport abstract class SettingPass extends BasePass {\r\n    getSetting = getSetting;\r\n    get setting (): PostProcessSetting { return this.getSetting(PostProcessSetting); }\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        const enable = super.checkEnable(camera);\r\n        const setting = this.setting;\r\n        return enable && !!setting && setting.enabledInHierarchy;\r\n    }\r\n}\r\n","import { EDITOR } from 'internal:constants';\r\nimport { Mat4, Vec2, Vec4 } from '../../../core';\r\nimport { game } from '../../../game';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera, CameraUsage } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { ResourceResidency } from '../../custom/types';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { TAA } from '../components/taa';\r\nimport { TAAMask } from '../components/taa-mask';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { disablePostProcessForDebugView } from './base-pass';\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { builtinResMgr } from '../../../asset/asset-manager';\r\nimport { Material, RenderTexture, Texture2D } from '../../../asset/assets';\r\nimport { MaterialInstance } from '../../../render-scene';\r\n\r\nconst tempVec4 = new Vec4();\r\n\r\nconst halton8 = [\r\n    new Vec2(0.5, 1.0 / 3),\r\n    new Vec2(0.25, 2.0 / 3),\r\n    new Vec2(0.75, 1.0 / 9),\r\n    new Vec2(0.125, 4.0 / 9),\r\n    new Vec2(0.625, 7.0 / 9),\r\n    new Vec2(0.375, 2.0 / 9),\r\n    new Vec2(0.875, 5.0 / 9),\r\n    new Vec2(0.0625, 8.0 / 9),\r\n];\r\nhalton8.forEach((v) => {\r\n    v.x -= 0.5;\r\n    v.y -= 0.5;\r\n});\r\n\r\nconst SampleOffsets = {\r\n    // 2xMSAA\r\n    // Pattern docs: http://msdn.microsoft.com/en-us/library/windows/desktop/ff476218(v=vs.85).aspx\r\n    //   N.\r\n    //   .S\r\n    x2: [\r\n        new Vec2(-4.0 / 16.0, -4.0 / 16.0),\r\n        new Vec2(4.0 / 16.0, 4.0 / 16.0),\r\n    ],\r\n\r\n    // 3xMSAA\r\n    //   A..\r\n    //   ..B\r\n    //   .C.\r\n    // Rolling circle pattern (A,B,C).\r\n    x3: [\r\n        new Vec2(-2.0 / 3.0, -2.0 / 3.0),\r\n        new Vec2(2 / 3, 0 / 3),\r\n        new Vec2(0 / 3, 2 / 3),\r\n    ],\r\n\r\n    // 4xMSAA\r\n    // Pattern docs: http://msdn.microsoft.com/en-us/library/windows/desktop/ff476218(v=vs.85).aspx\r\n    //   .N..\r\n    //   ...E\r\n    //   W...\r\n    //   ..S.\r\n    // Rolling circle pattern (N,E,S,W).\r\n    x4: [\r\n        new Vec2(-2 / 16, -6 / 16),\r\n        new Vec2(6 / 16, -2 / 16),\r\n        new Vec2(2 / 16, 6 / 16),\r\n        new Vec2(-6 / 16, 2 / 16),\r\n    ],\r\n\r\n    x5: [\r\n        // Compressed 4 sample pattern on same vertical and horizontal line (less temporal flicker).\r\n        // Compressed 1/2 works better than correct 2/3 (reduced temporal flicker).\r\n        //   . N .\r\n        //   W . E\r\n        //   . S .\r\n        // Rolling circle pattern (N,E,S,W).\r\n        new Vec2(0, -1 / 2),\r\n        new Vec2(1 / 2, 0),\r\n        new Vec2(0, 1 / 2),\r\n        new Vec2(-1 / 2, 0),\r\n    ],\r\n\r\n    halton8,\r\n};\r\n\r\nexport class TAAPass extends SettingPass {\r\n    get setting (): TAA { return getSetting(TAA); }\r\n\r\n    name = 'TAAPass';\r\n    effectName = 'pipeline/post-process/taa';\r\n    outputNames = ['TAA_First', 'TAA_Second'];\r\n\r\n    prevMatViewProj = new Mat4();\r\n    taaTextureIndex = -2;\r\n    samples = SampleOffsets.halton8;\r\n    sampleIndex = -1;\r\n    sampleOffset = new Vec2();\r\n\r\n    forceRender = true;\r\n    dirty = false;\r\n\r\n    taaMaskMaterial: Material | undefined;\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (EDITOR && camera.cameraUsage === CameraUsage.PREVIEW) {\r\n            enable = false;\r\n        }\r\n        if (disablePostProcessForDebugView()) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        if (!this.checkEnable(camera)) {\r\n            return this.lastPass!.slotName(camera, index);\r\n        }\r\n\r\n        if (this.taaTextureIndex < 0) {\r\n            return super.slotName(camera, 0);\r\n        }\r\n\r\n        return super.slotName(camera, (this.taaTextureIndex + 1) % 2);\r\n    }\r\n\r\n    applyCameraJitter (camera: Camera): void {\r\n        (camera as any)._isProjDirty = true;\r\n        camera.update(true);\r\n\r\n        camera.matProj.m12 += this.sampleOffset.x;\r\n        camera.matProj.m13 += this.sampleOffset.y;\r\n\r\n        Mat4.invert(camera.matProjInv, camera.matProj);\r\n        Mat4.multiply(camera.matViewProj, camera.matProj, camera.matView);\r\n        Mat4.invert(camera.matViewProjInv, camera.matViewProj);\r\n        camera.frustum.update(camera.matViewProj, camera.matViewProjInv);\r\n    }\r\n\r\n    updateSample (): void {\r\n        if (this.dirty || this.forceRender) {\r\n            this.sampleIndex++;\r\n            this.taaTextureIndex++;\r\n            this.dirty = false;\r\n        }\r\n\r\n        let offset = this.samples[this.sampleIndex % this.samples.length];\r\n        if (this.sampleIndex === -1) {\r\n            offset = Vec2.ZERO;\r\n        }\r\n\r\n        const setting = this.setting;\r\n\r\n        this.sampleOffset.x = offset.x * setting.sampleScale / game.canvas!.width;\r\n        this.sampleOffset.y = offset.y * setting.sampleScale / game.canvas!.height;\r\n    }\r\n\r\n    firstRender = true;\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.clearFlag = ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, 0, 0, 0, 1);\r\n\r\n        const firstRender = this.firstRender;\r\n        if (firstRender) {\r\n            this.prevMatViewProj.set(camera.matViewProj);\r\n            this.firstRender = false;\r\n        }\r\n\r\n        const setting = this.setting;\r\n\r\n        passContext.updatePassViewPort();\r\n        const width = passContext.passViewport.width;\r\n        const height = passContext.passViewport.height;\r\n\r\n        let material: Material = this.material;\r\n        const taaMask = camera.node.getComponent(TAAMask);\r\n        let maskTex: Texture2D | RenderTexture | undefined;\r\n        if (taaMask! && taaMask.enabledInHierarchy) {\r\n            maskTex = taaMask.mask;\r\n        }\r\n        if (maskTex) {\r\n            if (!this.taaMaskMaterial) {\r\n                const mi = new MaterialInstance({\r\n                    parent: material,\r\n                });\r\n                mi.recompileShaders({\r\n                    USE_TAA_MASK: !EDITOR,\r\n                });\r\n                this.taaMaskMaterial = mi;\r\n            }\r\n            material = this.taaMaskMaterial;\r\n            material.setProperty('motionMaskTex', maskTex);\r\n        } else {\r\n            const black = builtinResMgr.get('black-texture');\r\n            maskTex = black as Texture2D;\r\n            material.setProperty('motionMaskTex', maskTex);\r\n        }\r\n\r\n        material.setProperty('taaParams1', tempVec4.set(this.sampleOffset.x, this.sampleOffset.y, setting.feedback, 0));\r\n        material.setProperty('taaTextureSize', tempVec4.set(1 / width, 1 / height, 1 / width, 1 / height));\r\n        material.setProperty('taaPrevViewProj', this.prevMatViewProj);\r\n        this.prevMatViewProj.set(camera.matViewProj);\r\n\r\n        passContext.material = material;\r\n\r\n        // input output\r\n        const input0 = this.lastPass!.slotName(camera, 0);\r\n        let historyTexture = super.slotName(camera, this.taaTextureIndex % 2);\r\n\r\n        if (firstRender) {\r\n            historyTexture = input0;\r\n        }\r\n\r\n        const slot0 = this.slotName(camera, 0);\r\n        const depthTex = passContext.depthSlotName;\r\n\r\n        const layoutName = `DeferredTAA${this.taaTextureIndex < 0 ? -1 : (this.taaTextureIndex % 2)}`;\r\n        passContext\r\n            .addRenderPass(layoutName, `CameraTAAPass${cameraID}`)\r\n            .setPassInput(input0, 'inputTexture')\r\n            .setPassInput(depthTex, 'depthTex')\r\n            .setPassInput(historyTexture, 'taaPrevTexture')\r\n            .addRasterView(slot0, Format.RGBA16F, true, ResourceResidency.PERSISTENT)\r\n            .blitScreen(0)\r\n            .version();\r\n    }\r\n}\r\n","import { CCFloat } from '../../../core';\r\nimport { type } from '../../../core/data/class-decorator';\r\nimport { ccclass, disallowMultiple, executeInEditMode, help, menu, range, serializable, slide, tooltip } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.FSR')\r\n@help('cc.FSR')\r\n@menu('PostProcess/FSR')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class FSR extends PostProcessSetting {\r\n    @serializable\r\n    protected _sharpness = 0.8;\r\n\r\n    @tooltip('i18n:fsr.sharpness')\r\n    @slide\r\n    @range([0.0, 1, 0.01])\r\n    @type(CCFloat)\r\n    get sharpness (): number {\r\n        return this._sharpness;\r\n    }\r\n    set sharpness (v: number) {\r\n        this._sharpness = v;\r\n    }\r\n}\r\n","import { EDITOR } from 'internal:constants';\r\nimport { clamp, Vec4 } from '../../../core';\r\nimport { Format } from '../../../gfx';\r\nimport { Camera, CameraUsage } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { FSR } from '../components/fsr';\r\nimport { getSetting, SettingPass } from './setting-pass';\r\n\r\nconst tempVec4 = new Vec4();\r\n\r\nexport class FSRPass extends SettingPass {\r\n    get setting (): FSR { return getSetting(FSR); }\r\n\r\n    name = 'FSRPass';\r\n    effectName = 'pipeline/post-process/fsr';\r\n    outputNames = ['FSRColor'];\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (EDITOR && camera.cameraUsage === CameraUsage.PREVIEW) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.material = this.material;\r\n        passContext.clearBlack();\r\n\r\n        passContext.updatePassViewPort(1 / passContext.shadingScale, 0);\r\n\r\n        const inputWidth = Math.floor(passContext.passViewport.width * passContext.shadingScale);\r\n        const inputHeight = Math.floor(passContext.passViewport.height * passContext.shadingScale);\r\n        const outWidth = Math.floor(passContext.passViewport.width);\r\n        const outHeight = Math.floor(passContext.passViewport.height);\r\n\r\n        const setting = this.setting;\r\n        this.material.setProperty('fsrParams', tempVec4.set(clamp(1.0 - setting.sharpness, 0.02, 0.98), 0, 0, 0));\r\n        this.material.setProperty('texSize', tempVec4.set(inputWidth, inputHeight, outWidth, outHeight));\r\n\r\n        const input0 = this.lastPass!.slotName(camera, 0);\r\n        const easu = `FSR_EASU${cameraID}`;\r\n        passContext\r\n            .addRenderPass('post-process', `CameraFSR_EASU_Pass${cameraID}`)\r\n            .setPassInput(input0, 'outputResultMap')\r\n            .addRasterView(easu, Format.RGBA8)\r\n            .blitScreen(0)\r\n            .version();\r\n\r\n        const slot0 = this.slotName(camera, 0);\r\n        passContext\r\n            .addRenderPass('post-process', `CameraFSR_RCAS_Pass${cameraID}`)\r\n            .setPassInput(easu, 'outputResultMap')\r\n            .addRasterView(slot0, Format.RGBA8)\r\n            .blitScreen(1)\r\n            .version();\r\n    }\r\n}\r\n","import { EDITOR } from 'internal:constants';\r\nimport { Material } from '../../../asset/assets';\r\nimport { property, serializable } from '../../../core/data/class-decorator';\r\nimport { ccclass, disallowMultiple, executeInEditMode, help, menu } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.BlitScreenMaterial')\r\nclass BlitScreenMaterial {\r\n    @property(Material)\r\n    @serializable\r\n    protected _material: Material | undefined;\r\n\r\n    @property(Material)\r\n    get material (): Material | undefined {\r\n        return this._material;\r\n    }\r\n    set material (v) {\r\n        this._material = v;\r\n    }\r\n\r\n    @property({\r\n        serializable: true\r\n    })\r\n    enable = true;\r\n}\r\n\r\n@ccclass('cc.BlitScreen')\r\n@help('cc.BlitScreen')\r\n@menu('PostProcess/BlitScreen')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class BlitScreen extends PostProcessSetting {\r\n    @property(Material)\r\n    @serializable\r\n    protected _activeMaterials: Material[] = [];\r\n    @property({ type: Material, visible: false })\r\n    get activeMaterials (): Material[] {\r\n        return this._activeMaterials;\r\n    }\r\n    set activeMaterials (v) {\r\n        this._activeMaterials = v;\r\n        for (let i = 0; i < this._materials.length; i++) {\r\n            for (let j = 0; j < v.length; j++) {\r\n                if (this._materials[i] && v[j]) {\r\n                    if (this._materials[i].material?.uuid === v[j].uuid) {\r\n                        this._materials[i].material = v[j];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @property(BlitScreenMaterial)\r\n    @serializable\r\n    protected _materials: BlitScreenMaterial[] = [];\r\n\r\n    @property(BlitScreenMaterial)\r\n    get materials (): BlitScreenMaterial[] {\r\n        return this._materials;\r\n    }\r\n    set materials (v) {\r\n        this._materials = v;\r\n        if (EDITOR) {\r\n            setTimeout(() => {\r\n                globalThis.cce.Engine.repaintInEditMode();\r\n            }, 50);\r\n        }\r\n        this.updateActiveMaterials();\r\n    }\r\n\r\n    updateActiveMaterials (): void {\r\n        const materials = this._materials;\r\n        this._activeMaterials.length = 0;\r\n        for (let i = 0; i < materials.length; i++) {\r\n            const m = materials[i];\r\n            if (m.enable && m.material) {\r\n                this._activeMaterials.push(m.material);\r\n            }\r\n        }\r\n    }\r\n\r\n    onLoad (): void {\r\n        this.updateActiveMaterials();\r\n    }\r\n}\r\n","import { Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { getSetting, SettingPass } from './setting-pass';\r\n\r\nimport { BlitScreen } from '../components/blit-screen';\r\n\r\nconst outputNames = ['BlitScreenColor0', 'BlitScreenColor1'];\r\n\r\nexport class BlitScreenPass extends SettingPass {\r\n    get setting (): BlitScreen { return getSetting(BlitScreen); }\r\n\r\n    name = 'BlitScreenPass';\r\n    effectName = 'pipeline/post-process/blit-screen';\r\n\r\n    outputName = outputNames[0];\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        return this.outputName;\r\n    }\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        const enable = super.checkEnable(camera);\r\n        const setting = this.setting;\r\n        return enable && (setting.activeMaterials.length > 0);\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.clearBlack();\r\n\r\n        let input0 = this.lastPass!.slotName(camera, 0);\r\n\r\n        let slotIdx = 0;\r\n        const materials = this.setting.activeMaterials;\r\n        for (let i = 0; i < materials.length; i++) {\r\n            const material = materials[i];\r\n            passContext.material = material;\r\n\r\n            const slotName = `${outputNames[slotIdx]}${cameraID}`;\r\n            slotIdx = (++slotIdx) % 2;\r\n\r\n            passContext\r\n                .updatePassViewPort()\r\n                .addRenderPass('post-process', `${this.name}${cameraID}${slotIdx}`)\r\n                .setPassInput(input0, 'inputTexture')\r\n                .addRasterView(slotName, Format.RGBA8)\r\n                .blitScreen(0)\r\n                .version();\r\n\r\n            input0 = slotName;\r\n        }\r\n\r\n        this.outputName = input0;\r\n    }\r\n}\r\n","import { Camera } from '../../../render-scene/scene';\r\nimport { buildShadowPasses, getCameraUniqueID } from '../../custom/define';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass } from './base-pass';\r\n\r\nexport class ShadowPass extends BasePass {\r\n    name = 'ShadowPass';\r\n\r\n    mainLightShadows: string[] = [];\r\n    spotLightShadows: string[] = [];\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        passContext.shadowPass = this;\r\n\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const cameraName = `Camera${cameraID}`;\r\n        const shadowInfo = buildShadowPasses(cameraName, camera, ppl);\r\n\r\n        this.mainLightShadows = shadowInfo.mainLightShadowNames;\r\n        this.spotLightShadows = shadowInfo.spotLightShadowNames;\r\n    }\r\n}\r\n","import { Texture2D } from '../../../asset/assets';\r\nimport { CCFloat } from '../../../core';\r\nimport { property } from '../../../core/data/class-decorator';\r\nimport { ccclass, disallowMultiple, executeInEditMode, help, menu, range, serializable, slide, tooltip, type } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.ColorGrading')\r\n@help('cc.ColorGrading')\r\n@menu('PostProcess/ColorGrading')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class ColorGrading extends PostProcessSetting {\r\n    @serializable\r\n    protected _contribute = 0.0;\r\n    @serializable\r\n    protected _colorGradingMap: Texture2D | null = null;\r\n\r\n    @tooltip('i18n:color_grading.contribute')\r\n    @slide\r\n    @range([0, 1, 0.01])\r\n    @type(CCFloat)\r\n    set contribute (value: number) {\r\n        this._contribute = value;\r\n    }\r\n    get contribute (): number {\r\n        return this._contribute;\r\n    }\r\n\r\n    @tooltip('i18n:color_grading.originalMap')\r\n    @type(Texture2D)\r\n    set colorGradingMap (val: Texture2D) {\r\n        this._colorGradingMap = val;\r\n    }\r\n    get colorGradingMap (): Texture2D {\r\n        return this._colorGradingMap!;\r\n    }\r\n}\r\n","import { cclegacy } from '../../../core';\r\nimport { ccclass, disallowMultiple, executeInEditMode, help, menu, range, rangeMin,\r\n    serializable, slide, tooltip, type, visible } from '../../../core/data/decorators';\r\nimport { CCBoolean, CCFloat, CCInteger } from '../../../core/data/utils/attribute';\r\nimport { Root } from '../../../root';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.Bloom')\r\n@help('cc.Bloom')\r\n@menu('PostProcess/Bloom')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class Bloom extends PostProcessSetting {\r\n    @serializable\r\n    protected _enableAlphaMask = false;\r\n    @serializable\r\n    protected _useHdrIlluminance: boolean = false;\r\n    @serializable\r\n    protected _threshold = 0.8;\r\n    @serializable\r\n    protected _iterations = 3;\r\n    @serializable\r\n    protected _intensity = 2.3;\r\n\r\n    @tooltip('i18n:bloom.enableAlphaMask')\r\n    @type(CCBoolean)\r\n    set enableAlphaMask (value: boolean) {\r\n        this._enableAlphaMask = value;\r\n    }\r\n    get enableAlphaMask (): boolean {\r\n        return this._enableAlphaMask;\r\n    }\r\n\r\n    @tooltip('i18n:bloom.useHdrIlluminance')\r\n    @visible(() => (cclegacy.director.root as Root).pipeline.getMacroBool('CC_USE_FLOAT_OUTPUT'))\r\n    @type(CCBoolean)\r\n    set useHdrIlluminance (value: boolean) {\r\n        this._useHdrIlluminance = value;\r\n    }\r\n    get useHdrIlluminance (): boolean {\r\n        return this._useHdrIlluminance;\r\n    }\r\n\r\n    @tooltip('i18n:bloom.threshold')\r\n    @rangeMin(0)\r\n    @type(CCFloat)\r\n    set threshold (value: number) {\r\n        this._threshold = value;\r\n    }\r\n    get threshold (): number {\r\n        return this._threshold;\r\n    }\r\n\r\n    @tooltip('i18n:bloom.iterations')\r\n    @slide\r\n    @range([1, 6, 1])\r\n    @type(CCInteger)\r\n    set iterations (value: number) {\r\n        this._iterations = value;\r\n    }\r\n    get iterations (): number {\r\n        return this._iterations;\r\n    }\r\n\r\n    @tooltip('i18n:bloom.intensity')\r\n    @rangeMin(0)\r\n    @type(CCFloat)\r\n    set intensity (value: number) {\r\n        this._intensity = value;\r\n    }\r\n    get intensity (): number {\r\n        return this._intensity;\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { CCBoolean, CCFloat, CCInteger } from '../../../core';\r\nimport { ccclass, disallowMultiple, editable, executeInEditMode, help, menu, range,\r\n    serializable, slide, tooltip, type, visible } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.HBAO')\r\n@help('cc.HBAO')\r\n@menu('PostProcess/HBAO')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class HBAO extends PostProcessSetting {\r\n    @serializable\r\n    protected _radiusScale = 1.0;\r\n    @serializable\r\n    protected _angleBiasDegree = 10.0;\r\n    @serializable\r\n    protected _blurSharpness = 3;\r\n    @serializable\r\n    protected _aoSaturation = 1.0;\r\n    @serializable\r\n    protected _needBlur = true;\r\n\r\n    @slide\r\n    @tooltip('i18n:hbao.radiusScale')\r\n    @range([0, 10, 0.01])\r\n    @type(CCFloat)\r\n    @editable\r\n    set radiusScale (value: number) {\r\n        this._radiusScale = value;\r\n    }\r\n    get radiusScale (): number {\r\n        return this._radiusScale;\r\n    }\r\n\r\n    @visible(false)\r\n    @slide\r\n    @tooltip('i18n:hbao.angleBiasDegree')\r\n    @range([0, 100, 0.1])\r\n    @type(CCFloat)\r\n    @editable\r\n    set angleBiasDegree (value: number) {\r\n        this._angleBiasDegree = value;\r\n    }\r\n    get angleBiasDegree (): number {\r\n        return this._angleBiasDegree;\r\n    }\r\n\r\n    @visible(false)\r\n    @slide\r\n    @tooltip('i18n:hbao.blurSharpness')\r\n    @range([0, 10, 1])\r\n    @type(CCInteger)\r\n    @editable\r\n    set blurSharpness (value: number) {\r\n        this._blurSharpness = value;\r\n    }\r\n    get blurSharpness (): number {\r\n        return this._blurSharpness;\r\n    }\r\n\r\n    @slide\r\n    @tooltip('i18n:hbao.aoSaturation')\r\n    @range([0, 10, 0.01])\r\n    @type(CCFloat)\r\n    @editable\r\n    set aoSaturation (value: number) {\r\n        this._aoSaturation = value;\r\n    }\r\n    get aoSaturation (): number {\r\n        return this._aoSaturation;\r\n    }\r\n\r\n    @tooltip('i18n:hbao.needBlur')\r\n    @type(CCBoolean)\r\n    @editable\r\n    set needBlur (value: boolean) {\r\n        this._needBlur = value;\r\n    }\r\n    get needBlur (): boolean {\r\n        return this._needBlur;\r\n    }\r\n}\r\n","import { ccclass, disallowMultiple, executeInEditMode, help, menu, range, rangeMin, serializable, slide, tooltip, type } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\nimport { CCFloat } from '../../../core';\r\n\r\n@ccclass('cc.DOF')\r\n@help('cc.DOF')\r\n@menu('PostProcess/DOF')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class DOF extends PostProcessSetting {\r\n    @serializable\r\n    protected _focusDistance = 0.0;\r\n    @serializable\r\n    protected _focusRange = 0.0;\r\n    @serializable\r\n    protected _bokehRadius = 1.0;\r\n\r\n    @rangeMin(0)\r\n    @type(CCFloat)\r\n    set focusDistance (value: number) {\r\n        this._focusDistance = value;\r\n    }\r\n    get focusDistance (): number {\r\n        return this._focusDistance;\r\n    }\r\n\r\n    @rangeMin(0)\r\n    @type(CCFloat)\r\n    set focusRange (value: number) {\r\n        this._focusRange = value;\r\n    }\r\n    get focusRange (): number {\r\n        return this._focusRange;\r\n    }\r\n\r\n    @slide\r\n    @range([1, 10, 0.01])\r\n    @rangeMin(1.0)\r\n    @type(CCFloat)\r\n    set bokehRadius (value: number) {\r\n        this._bokehRadius = value;\r\n    }\r\n    get bokehRadius (): number {\r\n        return this._bokehRadius;\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { EDITOR } from 'internal:constants';\r\nimport { cclegacy, toRadian, Vec2, Vec4, Vec3, v3 } from '../../../core';\r\nimport { Camera, CameraUsage } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { HBAO } from '../components';\r\nimport { Texture2D } from '../../../asset/assets/texture-2d';\r\nimport { ImageAsset } from '../../../asset/assets/image-asset';\r\nimport { DebugViewCompositeType, DebugViewSingleType } from '../../debug-view';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Scene } from '../../../scene-graph/scene';\r\nimport { TextureFilter, PixelFormat, WrapMode } from '../../../asset/assets/asset-enum';\r\n\r\nconst vec2 = new Vec2();\r\n\r\nclass HBAOParams {\r\n    declare randomTexture: Texture2D;\r\n\r\n    get uvDepthToEyePosParams (): Vec4 {\r\n        return this._uvDepthToEyePosParams;\r\n    }\r\n\r\n    get radiusParam (): Vec4 {\r\n        return this._radiusParam;\r\n    }\r\n\r\n    get miscParam (): Vec4 {\r\n        return this._miscParam;\r\n    }\r\n\r\n    get blurParam (): Vec4 {\r\n        return this._blurParam;\r\n    }\r\n\r\n    set depthTexFullResolution (val: Vec2) {\r\n        this._depthTexFullResolution.set(val);\r\n    }\r\n\r\n    set depthTexResolution (val: Vec2) {\r\n        this._depthTexResolution.set(val);\r\n    }\r\n\r\n    set sceneScale (val: number) {\r\n        this._sceneScale = val;\r\n    }\r\n\r\n    set cameraFov (val: number) {\r\n        this._cameraFov = val;\r\n    }\r\n\r\n    set radiusScale (val: number) {\r\n        this._radiusScale = val;\r\n    }\r\n\r\n    set angleBiasDegree (val: number) {\r\n        this._angleBiasDegree = val;\r\n    }\r\n\r\n    set aoStrength (val: number) {\r\n        this._aoStrength = val;\r\n    }\r\n\r\n    set blurSharpness (val: number) {\r\n        this._blurSharpness = val;\r\n    }\r\n\r\n    set aoSaturation (val: number) {\r\n        this._aoSaturation = val;\r\n    }\r\n\r\n    private _uvDepthToEyePosParams = new Vec4();\r\n    private _radiusParam = new Vec4();\r\n    private _miscParam = new Vec4();\r\n    private _blurParam = new Vec4();\r\n\r\n    private _depthTexFullResolution = new Vec2(1024);\r\n    private _depthTexResolution = new Vec2(1024);\r\n    private _sceneScale = 1.0;\r\n    private _cameraFov = toRadian(45.0);\r\n    private _radiusScale = 1.0;\r\n    private _angleBiasDegree = 10.0;\r\n    private _aoStrength = 1.0;\r\n    private _blurSharpness = 8;\r\n    private _aoSaturation = 1.0;\r\n\r\n    private _randomDirAndJitter: number[] = [\r\n        238, 91, 87, 255, 251, 44, 119, 255, 247, 64, 250, 255, 232, 5, 225, 255,\r\n        253, 177, 140, 255, 250, 51, 84, 255, 243, 76, 97, 255, 252, 36, 232, 255,\r\n        235, 100, 24, 255, 252, 36, 158, 255, 254, 20, 142, 255, 245, 135, 124, 255,\r\n        251, 43, 121, 255, 253, 31, 145, 255, 235, 98, 160, 255, 240, 146, 198, 255,\r\n    ];\r\n    private _init (): void {\r\n        const width = 4;\r\n        const height = 4;\r\n        const pixelFormat = PixelFormat.RGBA8888;\r\n        const arrayBuffer = new Uint8Array(width * height * 4);\r\n        for (let i = 0; i < this._randomDirAndJitter.length; i++) {\r\n            arrayBuffer[i] = this._randomDirAndJitter[i];\r\n        }\r\n        const image = new ImageAsset({\r\n            width,\r\n            height,\r\n            _data: arrayBuffer,\r\n            _compressed: false,\r\n            format: pixelFormat,\r\n        });\r\n        this.randomTexture = new Texture2D();\r\n        this.randomTexture.setFilters(TextureFilter.NEAREST, TextureFilter.NEAREST);\r\n        this.randomTexture.setMipFilter(TextureFilter.NONE);\r\n        this.randomTexture.setWrapMode(WrapMode.REPEAT, WrapMode.REPEAT, WrapMode.REPEAT);\r\n        this.randomTexture.image = image;\r\n    }\r\n\r\n    public update (): void {\r\n        // should be same value as shader\r\n        const HALF_KERNEL_RADIUS = 4;\r\n        const INV_LN2 = 1.44269504;\r\n        const SQRT_LN2 = 0.8325546;\r\n\r\n        const gR = this._radiusScale * this._sceneScale;\r\n        const gR2 = gR * gR;\r\n        const gNegInvR2 = -1.0 / gR2;\r\n        const gMaxRadiusPixels = 0.1 * Math.min(this._depthTexFullResolution.x, this._depthTexFullResolution.y);\r\n        this._radiusParam.set(gR, gR2, gNegInvR2, gMaxRadiusPixels);\r\n\r\n        const vec2 = new Vec2(this._depthTexResolution.y / this._depthTexResolution.x, 1.0);\r\n        const gFocalLen = new Vec2(vec2.x / Math.tan(this._cameraFov * 0.5), vec2.y / Math.tan(this._cameraFov * 0.5));\r\n        const gTanAngleBias = Math.tan(toRadian(this._angleBiasDegree));\r\n        const gStrength = this._aoStrength;\r\n        this._miscParam.set(gFocalLen.x, gFocalLen.y, gTanAngleBias, gStrength);\r\n\r\n        const gUVToViewA = new Vec2(2.0 / gFocalLen.x, -2.0 / gFocalLen.y);\r\n        const gUVToViewB = new Vec2(-1.0 / gFocalLen.x, 1.0 / gFocalLen.y);\r\n        this._uvDepthToEyePosParams.set(gUVToViewA.x, gUVToViewA.y, gUVToViewB.x, gUVToViewB.y);\r\n\r\n        const BlurSigma = (HALF_KERNEL_RADIUS + 1.0) * 0.5;\r\n        const gBlurFallOff = INV_LN2 / (2.0 * BlurSigma * BlurSigma);\r\n        const gBlurDepthThreshold = 2.0 * SQRT_LN2 * (this._sceneScale / this._blurSharpness);\r\n        this._blurParam.set(gBlurFallOff, gBlurDepthThreshold, this._blurSharpness / 8.0, this._aoSaturation);\r\n    }\r\n\r\n    constructor () {\r\n        this._init();\r\n        this.update();\r\n    }\r\n}\r\n\r\nexport class HBAOPass extends SettingPass {\r\n    private HBAO_PASS_INDEX = 0;\r\n    private HBAO_BLUR_X_PASS_INDEX = 1;\r\n    private HBAO_BLUR_Y_PASS_INDEX = 2;\r\n    private HBAO_COMBINED_PASS_INDEX = 3;\r\n    private _hbaoParams: HBAOParams | null = null;\r\n    private _initialize = false;\r\n    private averageObjectSize = new Map<Scene, number>();\r\n\r\n    get setting (): HBAO { return getSetting(HBAO); }\r\n\r\n    name = 'HBAOPass';\r\n    effectName = 'pipeline/post-process/hbao';\r\n    outputNames = ['hbaoRTName', 'hbaoBluredRTName'];\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (EDITOR && camera.cameraUsage === CameraUsage.PREVIEW) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    onGlobalPipelineStateChanged (): void {\r\n        passContext.material = this.material;\r\n        const passes = passContext.material.passes;\r\n        for (let i = 0; i < passes.length; i++) {\r\n            const pass = passes[i];\r\n            pass.beginChangeStatesSilently();\r\n            pass.tryCompile(); // force update shaders\r\n            pass.endChangeStatesSilently();\r\n        }\r\n    }\r\n\r\n    public getSceneScale (camera: Camera): number {\r\n        let sceneScale = camera.nearClip;\r\n        if (!this.averageObjectSize.has(camera.node.scene)) {\r\n            this._calculateObjectSize(camera.node.scene, camera.visibility);\r\n        }\r\n        if (this.averageObjectSize.has(camera.node.scene)) {\r\n            const objectSize = this.averageObjectSize.get(camera.node.scene)!;\r\n            // simple conversion\r\n            sceneScale = objectSize * 0.1;\r\n        }\r\n        return sceneScale;\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        passContext.updatePassViewPort();\r\n        const width = passContext.passViewport.width;\r\n        const height = passContext.passViewport.height;\r\n        if (!this._hbaoParams) {\r\n            this._hbaoParams = new HBAOParams();\r\n        }\r\n\r\n        const setting = this.setting;\r\n        if (!this._initialize) {\r\n            passContext.material = this.material;\r\n            this.material.setProperty('RandomTex', this._hbaoParams.randomTexture, 0);\r\n        }\r\n\r\n        // params\r\n        const aoStrength = 1.0;\r\n        // todo: nearest object distance from camera\r\n        const sceneScale = this.getSceneScale(camera);\r\n        // todo: Half Res Depth Tex\r\n        this._hbaoParams.depthTexFullResolution = vec2.set(width, height);\r\n        this._hbaoParams.depthTexResolution = vec2.set(width, height);\r\n        this._hbaoParams.sceneScale = sceneScale;\r\n        this._hbaoParams.cameraFov = camera.fov;\r\n        this._hbaoParams.radiusScale = setting.radiusScale;\r\n        this._hbaoParams.angleBiasDegree = setting.angleBiasDegree;\r\n        this._hbaoParams.aoStrength = aoStrength;\r\n        this._hbaoParams.blurSharpness = setting.blurSharpness;\r\n        this._hbaoParams.aoSaturation = setting.aoSaturation;\r\n        this._hbaoParams.update();\r\n\r\n        // debug view\r\n        const director = cclegacy.director;\r\n        const root = director.root;\r\n        if (root.debugView) {\r\n            if (root.debugView.isEnabled()\r\n                && (root.debugView.singleMode !== DebugViewSingleType.NONE && root.debugView.singleMode !== DebugViewSingleType.AO\r\n                || !root.debugView.isCompositeModeEnabled(DebugViewCompositeType.AO))) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        const inputRT = this.lastPass!.slotName(camera, 0);\r\n        const inputDS = this.lastPass!.slotName(camera, 1);\r\n        const hbaoInfo = this._renderHBAOPass(camera, inputDS);\r\n        let hbaoCombinedInputRTName = hbaoInfo.rtName;\r\n        if (this.setting.needBlur) {\r\n            const haboBlurInfoX =  this._renderHBAOBlurPass(camera, hbaoInfo.rtName, inputDS, false);\r\n            const haboBlurInfoY = this._renderHBAOBlurPass(camera, haboBlurInfoX.rtName, inputDS, true);\r\n            hbaoCombinedInputRTName = haboBlurInfoY.rtName;\r\n        }\r\n        this._renderHBAOCombinedPass(camera, hbaoCombinedInputRTName, inputRT);\r\n    }\r\n\r\n    private _renderHBAOPass (camera: Camera, inputDS: string): { rtName: string; dsName: string; } {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        const passIdx = this.HBAO_PASS_INDEX;\r\n        this.material.setProperty('uvDepthToEyePosParams',  this._hbaoParams!.uvDepthToEyePosParams, passIdx);\r\n        this.material.setProperty('radiusParam', this._hbaoParams!.radiusParam, passIdx);\r\n        this.material.setProperty('miscParam', this._hbaoParams!.miscParam, passIdx);\r\n        this.material.setProperty(\r\n            'randomTexSize',\r\n            new Vec4(\r\n                this._hbaoParams!.randomTexture.width,\r\n                this._hbaoParams!.randomTexture.height,\r\n                1.0 / this._hbaoParams!.randomTexture.width,\r\n                1.0 / this._hbaoParams!.randomTexture.height,\r\n            ),\r\n            passIdx,\r\n        );\r\n        this.material.setProperty('blurParam', this._hbaoParams!.blurParam, passIdx);\r\n\r\n        passContext.clearBlack();\r\n\r\n        const outputRT = super.slotName(camera, 0);\r\n        const layoutName = 'hbao-pass';\r\n        const passName = `CameraHBAOPass${cameraID}`;\r\n        passContext.addRenderPass(layoutName, passName)\r\n            .setPassInput(inputDS, 'DepthTex')\r\n            .addRasterView(outputRT, Format.RGBA8)\r\n            .blitScreen(passIdx)\r\n            .version();\r\n\r\n        return { rtName: outputRT, dsName: inputDS };\r\n    }\r\n\r\n    private _renderHBAOBlurPass (camera: Camera, inputRT: string, inputDS: string, isYPass: boolean): { rtName: string; dsName: string; } {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.clearBlack();\r\n\r\n        const passIdx = isYPass ? this.HBAO_BLUR_Y_PASS_INDEX : this.HBAO_BLUR_X_PASS_INDEX;\r\n        passContext.material = this.material;\r\n        this.material.setProperty('uvDepthToEyePosParams',  this._hbaoParams!.uvDepthToEyePosParams, passIdx);\r\n        this.material.setProperty('radiusParam', this._hbaoParams!.radiusParam, passIdx);\r\n        this.material.setProperty('miscParam', this._hbaoParams!.miscParam, passIdx);\r\n        this.material.setProperty(\r\n            'randomTexSize',\r\n            new Vec4(\r\n                this._hbaoParams!.randomTexture.width,\r\n                this._hbaoParams!.randomTexture.height,\r\n                1.0 / this._hbaoParams!.randomTexture.width,\r\n                1.0 / this._hbaoParams!.randomTexture.height,\r\n            ),\r\n            passIdx,\r\n        );\r\n        this.material.setProperty('blurParam', this._hbaoParams!.blurParam, passIdx);\r\n\r\n        let outputRT = super.slotName(camera, 1);\r\n        let layoutName = 'blurx-pass';\r\n        let passName = `CameraHBAOBluredXPass${cameraID}`;\r\n        if (isYPass) {\r\n            outputRT = super.slotName(camera, 0);\r\n            layoutName = 'blury-pass';\r\n            passName = `CameraHBAOBluredYPass${cameraID}`;\r\n        }\r\n        passContext.addRenderPass(layoutName, passName)\r\n            .setPassInput(inputRT, 'AOTexNearest')\r\n            .setPassInput(inputDS, 'DepthTex')\r\n            .addRasterView(outputRT, Format.RGBA8)\r\n            .blitScreen(passIdx)\r\n            .version();\r\n\r\n        return { rtName: outputRT, dsName: inputDS };\r\n    }\r\n\r\n    private _renderHBAOCombinedPass (camera: Camera, inputRT: string, outputRT: string): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        const passIdx = this.HBAO_COMBINED_PASS_INDEX;\r\n        passContext.material = this.material;\r\n        this.material.setProperty('uvDepthToEyePosParams',  this._hbaoParams!.uvDepthToEyePosParams, passIdx);\r\n        this.material.setProperty('radiusParam', this._hbaoParams!.radiusParam, passIdx);\r\n        this.material.setProperty('miscParam', this._hbaoParams!.miscParam, passIdx);\r\n        this.material.setProperty(\r\n            'randomTexSize',\r\n            new Vec4(\r\n                this._hbaoParams!.randomTexture.width,\r\n                this._hbaoParams!.randomTexture.height,\r\n                1.0 / this._hbaoParams!.randomTexture.width,\r\n                1.0 / this._hbaoParams!.randomTexture.height,\r\n            ),\r\n            passIdx,\r\n        );\r\n        this.material.setProperty('blurParam', this._hbaoParams!.blurParam, passIdx);\r\n\r\n        passContext.clearFlag = ClearFlagBit.NONE;\r\n\r\n        const layoutName = 'combine-pass';\r\n        const passName = `CameraHBAOCombinedPass${cameraID}`;\r\n        passContext.addRenderPass(layoutName, passName)\r\n            .setPassInput(inputRT, 'AOTexNearest')\r\n            .addRasterView(outputRT, Format.RGBA8)\r\n            .blitScreen(passIdx)\r\n            .version();\r\n    }\r\n\r\n    private _calculateObjectSize (scene: Scene, visibility: number): void {\r\n        if (!scene || !scene.renderScene) {\r\n            return;\r\n        }\r\n        const sumSize = new Vec3(0);\r\n        let modelCount = 0;\r\n        const models = scene.renderScene.models;\r\n        for (let i = 0; i < models.length; i++) {\r\n            const model = models[i];\r\n            if (!model.node || !model.worldBounds) continue;\r\n            if (model.node.layer & visibility) {\r\n                sumSize.add(model.worldBounds.halfExtents);\r\n                modelCount++;\r\n            }\r\n        }\r\n        if (modelCount > 0) {\r\n            sumSize.divide(v3(modelCount));\r\n            const scale = Math.min(sumSize.x, sumSize.y, sumSize.z);\r\n            this.averageObjectSize.set(scene, scale);\r\n        }\r\n    }\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        return this.lastPass!.slotName(camera, index);\r\n    }\r\n}\r\n","import { Vec2, Vec4 } from '../../../core';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { ColorGrading } from '../components';\r\nimport { disablePostProcessForDebugView } from './base-pass';\r\n\r\nexport class ColorGradingPass extends SettingPass {\r\n    get setting (): ColorGrading { return getSetting(ColorGrading); }\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (disablePostProcessForDebugView()) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    name = 'ColorGradingPass';\r\n    effectName = 'pipeline/post-process/color-grading';\r\n    outputNames = ['ColorGrading'];\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.clearFlag = ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, 0, 0, 0, 1);\r\n\r\n        passContext.material = this.material;\r\n\r\n        const setting = this.setting;\r\n        this.material.setProperty('colorGradingMap', setting.colorGradingMap);\r\n        this.material.setProperty('contribute', setting.contribute);\r\n        const textureSize = setting.colorGradingMap ? new Vec2(setting.colorGradingMap.width, setting.colorGradingMap.height) : new Vec2(1.0, 1.0);\r\n        this.material.setProperty('lutTextureSize', textureSize);\r\n\r\n        const input = this.lastPass!.slotName(camera, 0);\r\n        const slot = this.slotName(camera, 0);\r\n        const isSquareMap = setting.colorGradingMap && setting.colorGradingMap.width === setting.colorGradingMap.height;\r\n        const passName = isSquareMap ? 'color-grading-8x8' : 'color-grading-nx1';\r\n        const passIndx = isSquareMap ? 1 : 0;\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass(passName, `color-grading${cameraID}`)\r\n            .setPassInput(input, 'sceneColorMap')\r\n            .addRasterView(slot, Format.RGBA8)\r\n            .blitScreen(passIndx)\r\n            .version();\r\n    }\r\n}\r\n","import { Vec4 } from '../../../core';\r\nimport { Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { Bloom } from '../components';\r\nimport { disablePostProcessForDebugView } from './base-pass';\r\n\r\nconst MAX_BLOOM_FILTER_PASS_NUM = 6;\r\nconst BLOOM_DOWNSAMPLEPASS_INDEX = 1;\r\nconst BLOOM_UPSAMPLEPASS_INDEX = BLOOM_DOWNSAMPLEPASS_INDEX + MAX_BLOOM_FILTER_PASS_NUM;\r\nconst BLOOM_COMBINEPASS_INDEX = BLOOM_UPSAMPLEPASS_INDEX + MAX_BLOOM_FILTER_PASS_NUM;\r\nexport class BloomPass extends SettingPass {\r\n    get setting (): Bloom { return getSetting(Bloom); }\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (disablePostProcessForDebugView()) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    name = 'BloomPass';\r\n    effectName = 'pipeline/post-process/bloom';\r\n    outputNames = ['BloomColor'];\r\n    private _hdrInputName: string = '';\r\n\r\n    set hdrInputName (name: string) {\r\n        this._hdrInputName = name;\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const cameraName = `Camera${cameraID}`;\r\n\r\n        const passViewport = passContext.passViewport;\r\n\r\n        passContext.clearBlack();\r\n\r\n        passContext.material = this.material;\r\n\r\n        const setting = this.setting;\r\n\r\n        const input = this.lastPass!.slotName(camera, 0);\r\n        const output = `BLOOM_PREFILTER_COLOR${cameraID}`;\r\n        // prefilter pass\r\n        let shadingScale = 1 / 2;\r\n        const enableAlphaMask = setting.enableAlphaMask as unknown as number;\r\n        const useHDRIntensity = setting.useHdrIlluminance as unknown as number;\r\n        passContext.material.setProperty('texSize', new Vec4(useHDRIntensity, 0, setting.threshold, enableAlphaMask), 0);\r\n        passContext\r\n            .updatePassViewPort(shadingScale)\r\n            .addRenderPass('bloom-prefilter', `bloom-prefilter${cameraID}`)\r\n            .setPassInput(input, 'outputResultMap')\r\n            .setPassInput(this._hdrInputName, 'hdrInputMap')\r\n            .addRasterView(output, Format.RGBA8)\r\n            .blitScreen(0)\r\n            .version();\r\n\r\n        // down sampler pass\r\n        for (let i = 0; i < setting.iterations; ++i) {\r\n            const texSize = new Vec4(passViewport.width, passViewport.height, 0, 0);\r\n            const bloomPassDownSampleRTName = `dsBloomPassDownSampleColor${cameraName}${i}`;\r\n            const downSamplerInput = i === 0 ? output : `dsBloomPassDownSampleColor${cameraName}${i - 1}`;\r\n            passContext.material.setProperty('texSize', texSize, BLOOM_DOWNSAMPLEPASS_INDEX + i);\r\n            shadingScale /= 2;\r\n            passContext\r\n                .updatePassViewPort(shadingScale)\r\n                .addRenderPass(`bloom-upsample${i}`, `bloom-upsample${i}${cameraID}`)\r\n                .setPassInput(downSamplerInput, 'bloomTexture')\r\n                .addRasterView(bloomPassDownSampleRTName, Format.RGBA8)\r\n                .blitScreen(BLOOM_DOWNSAMPLEPASS_INDEX + i)\r\n                .version();\r\n        }\r\n\r\n        // up sampler pass\r\n        for (let i = 0; i < setting.iterations; ++i) {\r\n            const texSize = new Vec4(passViewport.width, passViewport.height, 0, 0);\r\n            const bloomPassUpSampleRTName = `dsBloomPassUpSampleColor${cameraName}${setting.iterations - 1 - i}`;\r\n            const upSamplerInput = i === 0 ? `dsBloomPassDownSampleColor${cameraName}${setting.iterations - 1}`\r\n                : `dsBloomPassUpSampleColor${cameraName}${setting.iterations - i}`;\r\n            passContext.material.setProperty('texSize', texSize, BLOOM_UPSAMPLEPASS_INDEX + i);\r\n            shadingScale *= 2;\r\n            passContext\r\n                .updatePassViewPort(shadingScale)\r\n                .addRenderPass(`bloom-downsample${i}`, `bloom-downsample${i}${cameraID}`)\r\n                .setPassInput(upSamplerInput, 'bloomTexture')\r\n                .addRasterView(bloomPassUpSampleRTName, Format.RGBA8)\r\n                .blitScreen(BLOOM_UPSAMPLEPASS_INDEX + i)\r\n                .version();\r\n        }\r\n\r\n        // combine Pass\r\n        passContext.material.setProperty('texSize', new Vec4(0, 0, 0, setting.intensity), BLOOM_COMBINEPASS_INDEX);\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass(`bloom-combine`, `bloom-combine${cameraID}`)\r\n            .setPassInput(input, 'outputResultMap')\r\n            .setPassInput(`dsBloomPassUpSampleColor${cameraName}${0}`, 'bloomTexture')\r\n            .addRasterView(this.slotName(camera, 0), Format.RGBA8)\r\n            .blitScreen(BLOOM_COMBINEPASS_INDEX)\r\n            .version();\r\n    }\r\n}\r\n","import { ccclass, disallowMultiple, executeInEditMode, help, menu } from '../../../core/data/decorators';\r\nimport { PostProcessSetting } from './post-process-setting';\r\n\r\n@ccclass('cc.FXAA')\r\n@help('cc.FXAA')\r\n@menu('PostProcess/FXAA')\r\n@disallowMultiple\r\n@executeInEditMode\r\nexport class FXAA extends PostProcessSetting {\r\n}\r\n","import { Vec4 } from '../../../core';\r\nimport { Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { FXAA } from '../components/fxaa';\r\n\r\nexport class FxaaPass extends SettingPass {\r\n    get setting (): FXAA { return getSetting(FXAA); }\r\n\r\n    name = 'FxaaPass';\r\n    effectName = 'pipeline/post-process/fxaa-hq';\r\n    outputNames = ['FxaaColor'];\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n        passContext.clearBlack();\r\n        passContext.material = this.material;\r\n\r\n        const setting = this.setting;\r\n\r\n        const input = this.lastPass!.slotName(camera, 0);\r\n        const output = this.slotName(camera);\r\n\r\n        passContext.updatePassViewPort();\r\n        const width = passContext.passViewport.width;\r\n        const height = passContext.passViewport.height;\r\n\r\n        passContext.material.setProperty('texSize', new Vec4(width, height, 1.0 / width, 1.0 / height), 0);\r\n\r\n        passContext.addRenderPass('fxaa', `fxaa${cameraID}`)\r\n            .setPassInput(input, 'sceneColorMap')\r\n            .addRasterView(output, Format.RGBA8)\r\n            .blitScreen(0)\r\n            .version();\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { Vec4, cclegacy } from '../../../core';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera, FOG_TYPE_NONE } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { SettingPass } from './setting-pass';\r\nimport { Root } from '../../../root';\r\n\r\nexport class FloatOutputProcessPass extends SettingPass {\r\n    name = 'FloatOutputProcessPass';\r\n    effectName = 'pipeline/float-output-process';\r\n    outputNames = ['FloatOutputProcess'];\r\n\r\n    hdrInputName: string = '';\r\n\r\n    enableInAllEditorCamera = true;\r\n    enable = true;\r\n    checkEnable (camera: Camera): boolean {\r\n        const ppl = (cclegacy.director.root as Root).pipeline;\r\n        return ppl.getMacroBool('CC_USE_FLOAT_OUTPUT');\r\n    }\r\n    getHDRInputName (): string { return this.hdrInputName; }\r\n\r\n    onGlobalPipelineStateChanged (): void {\r\n        passContext.material = this.material;\r\n        const passes = passContext.material.passes;\r\n        for (let i = 0; i < passes.length; i++) {\r\n            const pass = passes[i];\r\n            pass.beginChangeStatesSilently();\r\n            pass.tryCompile(); // force update shaders\r\n            pass.endChangeStatesSilently();\r\n        }\r\n    }\r\n    needDepthInput (ppl: Pipeline): boolean {\r\n        return ppl.pipelineSceneData.fog.type !== FOG_TYPE_NONE;\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n        passContext.material = this.material;\r\n\r\n        let copyDS = '';\r\n        let passIndx = 0;\r\n        const inputDS = passContext.depthSlotName;\r\n        if (this.needDepthInput(ppl)) {\r\n            copyDS = 'floatOutputProcessCopyDS';\r\n            // ==== Copy input DS ===\r\n            const copyInputDSPassLayoutName = 'copy-pass';\r\n            const copyInputDSPass = `floatOutputProcessCopyDS-pass${cameraID}`;\r\n            passContext.updatePassViewPort()\r\n                .addRenderPass(copyInputDSPassLayoutName, copyInputDSPass)\r\n                .setClearFlag(ClearFlagBit.COLOR)\r\n                .setClearColor(1.0, 0, 0, 0)\r\n                .setPassInput(inputDS, 'depthRaw')\r\n                .addRasterView(copyDS, Format.RGBA8)\r\n                .blitScreen(passIndx)\r\n                .version();\r\n        }\r\n\r\n        passIndx = 1;\r\n        this.hdrInputName = this.lastPass!.slotName(camera, 0);\r\n        const output = this.slotName(camera, 0);\r\n        const layoutName = 'tone-mapping';\r\n        const passName = `tone-mapping${cameraID}`;\r\n        passContext.clearFlag = ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, camera.clearColor.x, camera.clearColor.y, camera.clearColor.z, camera.clearColor.w);\r\n        passContext.updatePassViewPort()\r\n            .addRenderPass(layoutName, passName)\r\n            .setPassInput(this.hdrInputName, 'u_texSampler')\r\n            .setPassInput(copyDS, 'DepthTex')\r\n            .addRasterView(output, Format.RGBA8)\r\n            .blitScreen(passIndx)\r\n            .version();\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { LightInfo, QueueHint, SceneFlags } from '../../custom/types';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass, getRTFormatBeforeToneMapping, getShadowMapSampler } from './base-pass';\r\nimport { ShadowPass } from './shadow-pass';\r\n\r\nexport class ForwardTransparencyPass extends BasePass {\r\n    name = 'ForwardTransparencyPass';\r\n\r\n    enableInAllEditorCamera = true;\r\n    depthBufferShadingScale = 1;\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        return this.lastPass!.slotName(camera, index);\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        passContext.clearFlag = ClearFlagBit.NONE;\r\n\r\n        const output = this.lastPass!.slotName(camera, 0);\r\n        const outputDS = passContext.depthSlotName;\r\n\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const isOffScreen = true;\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass('default', `${this.name}_${cameraID}`)\r\n            .addRasterView(output, getRTFormatBeforeToneMapping(ppl), isOffScreen)\r\n            .addRasterView(outputDS, Format.DEPTH_STENCIL, isOffScreen)\r\n            .version();\r\n\r\n        const pass = passContext.pass!;\r\n        const shadowPass = passContext.shadowPass as ShadowPass;\r\n        if (shadowPass) {\r\n            for (const dirShadowName of shadowPass.mainLightShadows) {\r\n                if (ppl.containsResource(dirShadowName)) {\r\n                    pass.addTexture(dirShadowName, 'cc_shadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n            for (const spotShadowName of shadowPass.spotLightShadows) {\r\n                if (ppl.containsResource(spotShadowName)) {\r\n                    pass.addTexture(spotShadowName, 'cc_spotShadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n        }\r\n\r\n        pass.addQueue(QueueHint.RENDER_TRANSPARENT)\r\n            .addSceneOfCamera(\r\n                camera,\r\n                new LightInfo(),\r\n                SceneFlags.UI | SceneFlags.TRANSPARENT_OBJECT | SceneFlags.GEOMETRY,\r\n            );\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { LightInfo, QueueHint, SceneFlags } from '../../custom/types';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass } from './base-pass';\r\nimport { ForwardPass } from './forward-pass';\r\n\r\nexport class ForwardTransparencySimplePass extends BasePass {\r\n    name = 'ForwardTransparencySimplePass';\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        return (passContext.forwardPass as ForwardPass)!.slotName(camera, index);\r\n    }\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const pass = passContext.pass!;\r\n        pass.addQueue(QueueHint.RENDER_TRANSPARENT)\r\n            .addSceneOfCamera(\r\n                camera,\r\n                new LightInfo(),\r\n                SceneFlags.UI | SceneFlags.TRANSPARENT_OBJECT | SceneFlags.GEOMETRY,\r\n            );\r\n    }\r\n}\r\n","/*\r\n Copyright (c) 2023 Xiamen Yaji Software Co., Ltd.\r\n\r\n https://www.cocos.com/\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights to\r\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\n of the Software, and to permit persons to whom the Software is furnished to do so,\r\n subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n*/\r\n\r\nimport { Vec4, Vec3, cclegacy, warnID } from '../../../core';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { LightInfo, QueueHint, SceneFlags } from '../../custom/types';\r\nimport { BasicPipeline, PipelineRuntime } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { ShadowPass } from './shadow-pass';\r\nimport { Root } from '../../../root';\r\n\r\nimport { SettingPass } from './setting-pass';\r\nimport { forceEnableFloatOutput, getRTFormatBeforeToneMapping, getShadowMapSampler } from './base-pass';\r\n\r\nexport const COPY_INPUT_DS_PASS_INDEX = 0;\r\nexport const SSSS_BLUR_X_PASS_INDEX = 1;\r\nexport const SSSS_BLUR_Y_PASS_INDEX = 2;\r\n\r\nfunction hasSkinObject (ppl: PipelineRuntime): boolean {\r\n    const sceneData = ppl.pipelineSceneData;\r\n    return sceneData.skin.enabled && sceneData.skinMaterialModel !== null;\r\n}\r\n\r\nconst _varianceArray: number[] = [0.0484, 0.187, 0.567, 1.99, 7.41];\r\nconst _strengthParameterArray: number[] = [0.100, 0.118, 0.113, 0.358, 0.078];\r\nconst _vec3Temp: Vec3 = new Vec3();\r\nconst _vec3Temp2: Vec3 = new Vec3();\r\nconst _vec4Temp: Vec4 = new Vec4();\r\nconst _vec4Temp2: Vec4 = new Vec4();\r\n\r\nexport const EXPONENT = 2.0;\r\nexport const I_SAMPLES_COUNT = 25;\r\n\r\nexport class SSSSBlurData {\r\n    get ssssStrength (): Vec3 {\r\n        return this._v3SSSSStrength;\r\n    }\r\n    set ssssStrength (val: Vec3) {\r\n        this._v3SSSSStrength = val;\r\n        this._updateSampleCount();\r\n    }\r\n\r\n    get ssssFallOff (): Vec3 {\r\n        return this._v3SSSSFallOff;\r\n    }\r\n    set ssssFallOff (val: Vec3) {\r\n        this._v3SSSSFallOff = val;\r\n        this._updateSampleCount();\r\n    }\r\n\r\n    get kernel (): Vec4[] {\r\n        return this._kernel;\r\n    }\r\n\r\n    private _v3SSSSStrength = new Vec3(0.48, 0.41, 0.28);\r\n    private _v3SSSSFallOff = new Vec3(1.0, 0.37, 0.3);\r\n    private _kernel: Vec4[] = [];\r\n\r\n    /**\r\n     * We use a falloff to modulate the shape of the profile. Big falloffs\r\n     * spreads the shape making it wider, while small falloffs make it\r\n     * narrower.\r\n     */\r\n    private _gaussian (out: Vec3, variance: number, r: number): void {\r\n        const xx = r / (0.001 + this._v3SSSSFallOff.x);\r\n        out.x = Math.exp((-(xx * xx)) / (2.0 * variance)) / (2.0 * 3.14 * variance);\r\n        const yy = r / (0.001 + this._v3SSSSFallOff.y);\r\n        out.y = Math.exp((-(yy * yy)) / (2.0 * variance)) / (2.0 * 3.14 * variance);\r\n        const zz = r / (0.001 + this._v3SSSSFallOff.z);\r\n        out.z = Math.exp((-(zz * zz)) / (2.0 * variance)) / (2.0 * 3.14 * variance);\r\n    }\r\n\r\n    /**\r\n     * We used the red channel of the original skin profile defined in\r\n     * [d'Eon07] for all three channels. We noticed it can be used for green\r\n     * and blue channels (scaled using the falloff parameter) without\r\n     * introducing noticeable differences and allowing for total control over\r\n     * the profile. For example, it allows to create blue SSS gradients, which\r\n     * could be useful in case of rendering blue creatures.\r\n     */\r\n    private _profile (out: Vec3, val: number): void {\r\n        for (let i = 0; i < 5; i++) {\r\n            this._gaussian(_vec3Temp2, _varianceArray[i], val);\r\n            _vec3Temp2.multiplyScalar(_strengthParameterArray[i]);\r\n            out.add(_vec3Temp2);\r\n        }\r\n    }\r\n\r\n    private _updateSampleCount (): void {\r\n        const strength = this._v3SSSSStrength;\r\n        const nSamples = I_SAMPLES_COUNT;\r\n        const range = nSamples > 20 ? 3.0 : 2.0;\r\n\r\n        // Calculate the offsets:\r\n        const step = 2.0 * range / (nSamples - 1);\r\n        for (let i = 0; i < nSamples; i++) {\r\n            const o = -range + i * step;\r\n            const sign = o < 0.0 ? -1.0 : 1.0;\r\n            // eslint-disable-next-line no-restricted-properties\r\n            this._kernel[i].w = range * sign * Math.abs(o ** EXPONENT) / range ** EXPONENT;\r\n        }\r\n\r\n        // Calculate the weights:\r\n        for (let i = 0; i < nSamples; i++) {\r\n            const w0 = i > 0 ? Math.abs(this._kernel[i].w - this._kernel[i - 1].w) : 0.0;\r\n            const w1 = i < nSamples - 1 ? Math.abs(this._kernel[i].w - this._kernel[i + 1].w) : 0.0;\r\n            const area = (w0 + w1) / 2.0;\r\n            _vec3Temp.set(0);\r\n            this._profile(_vec3Temp, this._kernel[i].w);\r\n            _vec3Temp.multiplyScalar(area);\r\n            this._kernel[i].x = _vec3Temp.x;\r\n            this._kernel[i].y = _vec3Temp.y;\r\n            this._kernel[i].z = _vec3Temp.z;\r\n        }\r\n\r\n        // We want the offset 0.0 to come first:\r\n        const remainder = nSamples % 2;\r\n        _vec4Temp.set(this._kernel[(nSamples - remainder) / 2]);\r\n        for (let i = (nSamples - remainder) / 2; i > 0; i--) {\r\n            _vec4Temp2.set(this._kernel[i - 1]);\r\n            this._kernel[i].set(_vec4Temp2);\r\n        }\r\n        this._kernel[0].set(_vec4Temp);\r\n\r\n        // Calculate the sum of the weights, we will need to normalize them below:\r\n        _vec3Temp.set(0.0);\r\n        for (let i = 0; i < nSamples; i++) {\r\n            _vec3Temp.add3f(this._kernel[i].x, this._kernel[i].y, this._kernel[i].z);\r\n        }\r\n        // Normalize the weights:\r\n        for (let i = 0; i < nSamples; i++) {\r\n            this._kernel[i].x /= _vec3Temp.x;\r\n            this._kernel[i].y /= _vec3Temp.y;\r\n            this._kernel[i].z /= _vec3Temp.z;\r\n        }\r\n\r\n        // Tweak them using the desired strength. The first one is:\r\n        // lerp(1.0, kernel[0].rgb, strength)\r\n        this._kernel[0].x = (1.0 - strength.x) * 1.0 + strength.x * this._kernel[0].x;\r\n        this._kernel[0].y = (1.0 - strength.y) * 1.0 + strength.y * this._kernel[0].y;\r\n        this._kernel[0].z = (1.0 - strength.z) * 1.0 + strength.z * this._kernel[0].z;\r\n\r\n        // The others:\r\n        // lerp(0.0, kernel[0].rgb, strength)\r\n        for (let i = 1; i < nSamples; i++) {\r\n            this._kernel[i].x *= strength.x;\r\n            this._kernel[i].y *= strength.y;\r\n            this._kernel[i].z *= strength.z;\r\n        }\r\n    }\r\n\r\n    private _init (): void {\r\n        for (let i = 0; i < I_SAMPLES_COUNT; i++) {\r\n            this._kernel[i] = new Vec4();\r\n        }\r\n        this._updateSampleCount();\r\n    }\r\n\r\n    constructor () {\r\n        this._init();\r\n    }\r\n}\r\n\r\nexport class SkinPass extends SettingPass {\r\n    name = 'SkinPass';\r\n    effectName = 'pipeline/ssss-blur';\r\n    outputNames = ['SSSSBlur', 'SSSSBlurDS'];\r\n    ssssBlurData = new SSSSBlurData();\r\n\r\n    private _activate = false;\r\n\r\n    enableInAllEditorCamera = true;\r\n    checkEnable (camera: Camera): boolean {\r\n        const ppl = (cclegacy.director.root as Root).pipeline;\r\n        let enable = hasSkinObject(ppl);\r\n        if (enable) {\r\n            if (!this._activate) {\r\n                if (!ppl.getMacroBool('CC_USE_FLOAT_OUTPUT')) {\r\n                    warnID(16303);\r\n                }\r\n                if (!ppl.pipelineSceneData.standardSkinModel) {\r\n                    warnID(16304);\r\n                }\r\n                this._activate = true;\r\n            }\r\n            enable = forceEnableFloatOutput(ppl);\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    public render (camera: Camera, ppl: BasicPipeline): void {\r\n        passContext.material = this.material;\r\n\r\n        const inputRT = this.lastPass?.slotName(camera, 0);\r\n        const inputDS = passContext.depthSlotName;\r\n        this._buildSSSSBlurPass(camera, ppl, inputRT!, inputDS);\r\n        this._buildSpecularPass(camera, ppl, inputRT!, inputDS);\r\n    }\r\n\r\n    private _buildSSSSBlurPass (\r\n        camera: Camera,\r\n        ppl: BasicPipeline,\r\n        inputRT: string,\r\n        inputDS: string,\r\n    ): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const pipelineSceneData = ppl.pipelineSceneData;\r\n\r\n        let halfExtents = new Vec3(0.2, 0.2, 0.2);\r\n        const standardSkinModel = pipelineSceneData.standardSkinModel;\r\n        const skinMaterialModel = pipelineSceneData.skinMaterialModel;\r\n        if (standardSkinModel && standardSkinModel.worldBounds) {\r\n            halfExtents = standardSkinModel.worldBounds.halfExtents;\r\n        } else if (skinMaterialModel && skinMaterialModel.worldBounds) {\r\n            halfExtents = skinMaterialModel.worldBounds.halfExtents;\r\n        }\r\n        const boundingBox = Math.min(halfExtents.x, halfExtents.y, halfExtents.z) * 2.0;\r\n\r\n        const skin = pipelineSceneData.skin;\r\n\r\n        const ssssBlurRTName = super.slotName(camera, 0);\r\n        const ssssBlurDSName = super.slotName(camera, 1);\r\n\r\n        // ==== Copy input DS ===\r\n        const copyInputDSPassLayoutName = 'copy-pass';\r\n        const copyInputDSPass = `copyDS-pass${cameraID}`;\r\n        let passIdx = COPY_INPUT_DS_PASS_INDEX;\r\n        passContext.updatePassViewPort()\r\n            .addRenderPass(copyInputDSPassLayoutName, copyInputDSPass)\r\n            .setClearFlag(ClearFlagBit.COLOR)\r\n            .setClearColor(1.0, 0, 0, 0)\r\n            .setPassInput(inputDS, 'depthRaw')\r\n            .addRasterView(ssssBlurDSName, Format.RGBA8)\r\n            .blitScreen(passIdx)\r\n            .version();\r\n\r\n        // ==== SSSS Blur X Pass ===\r\n        passIdx = SSSS_BLUR_X_PASS_INDEX;\r\n        const ssssblurXPassLayoutName = 'ssss-blurX';\r\n        const ssssblurXPassPassName = `ssss-blurX${cameraID}`;\r\n        this.material.setProperty('blurInfo', new Vec4(\r\n            camera.fov,\r\n            skin.blurRadius,\r\n            boundingBox,\r\n            skin.sssIntensity,\r\n        ), passIdx);\r\n        this.material.setProperty('kernel',  this.ssssBlurData.kernel, passIdx);\r\n        passContext.updatePassViewPort()\r\n            .addRenderPass(ssssblurXPassLayoutName, ssssblurXPassPassName)\r\n            .setPassInput(inputRT, 'colorTex')\r\n            .setPassInput(ssssBlurDSName, 'depthTex')\r\n            .setClearFlag(ClearFlagBit.COLOR)\r\n            .setClearColor(0, 0, 0, 1)\r\n            .addRasterView(ssssBlurRTName, getRTFormatBeforeToneMapping(ppl))\r\n            .blitScreen(passIdx)\r\n            .version();\r\n\r\n        // === SSSS Blur Y Pass ===\r\n        passIdx = SSSS_BLUR_Y_PASS_INDEX;\r\n        const ssssblurYPassLayoutName = 'ssss-blurY';\r\n        const ssssblurYPassPassName = `ssss-blurY${cameraID}`;\r\n        this.material.setProperty('blurInfo', new Vec4(\r\n            camera.fov,\r\n            skin.blurRadius,\r\n            boundingBox,\r\n            skin.sssIntensity,\r\n        ), passIdx);\r\n        this.material.setProperty('kernel',  this.ssssBlurData.kernel, passIdx);\r\n        passContext.updatePassViewPort()\r\n            .addRenderPass(ssssblurYPassLayoutName, ssssblurYPassPassName)\r\n            .setPassInput(ssssBlurRTName, 'colorTex')\r\n            .setPassInput(ssssBlurDSName, 'depthTex')\r\n            .setClearFlag(ClearFlagBit.NONE)\r\n            .setClearColor(0, 0, 0, 1)\r\n            .addRasterView(inputRT, getRTFormatBeforeToneMapping(ppl))\r\n            .blitScreen(passIdx)\r\n            .version();\r\n    }\r\n\r\n    private _buildSpecularPass (\r\n        camera: Camera,\r\n        ppl: BasicPipeline,\r\n        inputRT: string,\r\n        inputDS: string,\r\n    ): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n        const layoutName = 'specular-pass';\r\n        const passName = `specular-pass${cameraID}`;\r\n        passContext.updatePassViewPort()\r\n            .addRenderPass(layoutName, passName)\r\n            .setClearFlag(ClearFlagBit.NONE)\r\n            .setClearColor(0, 0, 0, 1)\r\n            .addRasterView(inputRT, getRTFormatBeforeToneMapping(ppl), true)\r\n            .setClearFlag(ClearFlagBit.NONE)\r\n            .setClearDepthColor(camera.clearDepth, camera.clearStencil, 0, 1)\r\n            .addRasterView(inputDS, Format.DEPTH_STENCIL, true)\r\n            .version();\r\n\r\n        const pass = passContext.pass!;\r\n        const shadowPass = passContext.shadowPass as ShadowPass;\r\n        if (shadowPass) {\r\n            for (const dirShadowName of shadowPass.mainLightShadows) {\r\n                if (ppl.containsResource(dirShadowName)) {\r\n                    pass.addTexture(dirShadowName, 'cc_shadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n            for (const spotShadowName of shadowPass.spotLightShadows) {\r\n                if (ppl.containsResource(spotShadowName)) {\r\n                    pass.addTexture(spotShadowName, 'cc_spotShadowMap', getShadowMapSampler());\r\n                }\r\n            }\r\n        }\r\n\r\n        pass.addQueue(QueueHint.RENDER_OPAQUE, 'default')\r\n            .addSceneOfCamera(\r\n                camera,\r\n                new LightInfo(),\r\n                SceneFlags.TRANSPARENT_OBJECT\r\n            | SceneFlags.CUTOUT_OBJECT,\r\n            );\r\n        pass.addQueue(QueueHint.RENDER_TRANSPARENT, 'forward-add')\r\n            .addSceneOfCamera(\r\n                camera,\r\n                new LightInfo(),\r\n                SceneFlags.TRANSPARENT_OBJECT\r\n            | SceneFlags.CUTOUT_OBJECT,\r\n            );\r\n    }\r\n\r\n    slotName (camera: Camera, index = 0): string {\r\n        return this.lastPass!.slotName(camera, index);\r\n    }\r\n}\r\n","import { Vec4 } from '../../../core';\r\nimport { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { passContext } from '../utils/pass-context';\r\nimport { BasePass } from './base-pass';\r\n\r\nexport class PostFinalPass extends BasePass {\r\n    name = 'PostFinalPass';\r\n    outputNames = ['PostFinalColor'];\r\n    effectName = 'pipeline/post-process/post-final';\r\n\r\n    enableInAllEditorCamera = true;\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        if (!this.lastPass) {\r\n            return;\r\n        }\r\n\r\n        passContext.clearFlag = camera.clearFlag & ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, camera.clearColor.x, camera.clearColor.y, camera.clearColor.z, camera.clearColor.w);\r\n\r\n        passContext.material = this.material;\r\n\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        const input0 = this.lastPass.slotName(camera, 0);\r\n        const slot0 = this.slotName(camera, 0);\r\n\r\n        const isOffScreen = false;//director.root!.mainWindow !== camera.window;\r\n\r\n        const fb = camera.window.framebuffer;\r\n        const ct = fb && fb.colorTextures[0];\r\n        const format = ct ? ct.format : Format.RGBA8;\r\n\r\n        const shadingScale = passContext.shadingScale;\r\n        passContext\r\n            .updatePassViewPort(1 / shadingScale, 1 / shadingScale)\r\n            .addRenderPass('post-final', `${this.name}${cameraID}`)\r\n            .setPassInput(input0, 'inputTexture')\r\n            .addRasterView(slot0, format, isOffScreen)\r\n            .blitScreen(0);\r\n\r\n        this.renderProfiler(camera);\r\n    }\r\n}\r\n","import { ClearFlagBit, Format } from '../../../gfx';\r\nimport { Camera } from '../../../render-scene/scene';\r\nimport { Pipeline } from '../../custom/pipeline';\r\nimport { getCameraUniqueID } from '../../custom/define';\r\nimport { passContext } from '../utils/pass-context';\r\n\r\nimport { getSetting, SettingPass } from './setting-pass';\r\nimport { disablePostProcessForDebugView } from './base-pass';\r\nimport { Vec4 } from '../../../core';\r\nimport { DOF } from '../components/dof';\r\n\r\nexport class DofPass extends SettingPass {\r\n    get setting (): DOF { return getSetting(DOF); }\r\n\r\n    checkEnable (camera: Camera): boolean {\r\n        let enable = super.checkEnable(camera);\r\n        if (disablePostProcessForDebugView()) {\r\n            enable = false;\r\n        }\r\n        return enable;\r\n    }\r\n\r\n    name = 'DOFPass';\r\n    effectName = 'pipeline/post-process/dof';\r\n    outputNames = ['DOFColor'];\r\n\r\n    public render (camera: Camera, ppl: Pipeline): void {\r\n        const cameraID = getCameraUniqueID(camera);\r\n\r\n        passContext.clearFlag = ClearFlagBit.COLOR;\r\n        Vec4.set(passContext.clearColor, 0, 0, 0, 1);\r\n\r\n        const passViewport = passContext.passViewport;\r\n\r\n        passContext.material = this.material;\r\n\r\n        const setting = this.setting;\r\n\r\n        const width = passViewport.width;\r\n        const height = passViewport.height;\r\n\r\n        const cocParams = new Vec4(setting.focusDistance, setting.focusRange, setting.bokehRadius, 0.0);\r\n        const mainTexTexelSize = new Vec4(1.0 / width, 1.0 / height, width, height);\r\n\r\n        this.material.setProperty('cocParams', cocParams);\r\n        this.material.setProperty('mainTexTexelSize', mainTexTexelSize);\r\n\r\n        const slot = this.slotName(camera, 0);\r\n        const colorTex = this.lastPass!.slotName(camera, 0);\r\n        const depthTex = this.lastPass!.slotName(camera, 1);\r\n\r\n        // compute CoC\r\n        const outputCOC = `DOF_CIRCLE_OF_CONFUSION${cameraID}`;\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass('dof-coc', `dof-coc${cameraID}`)\r\n            .setPassInput(depthTex, 'DepthTex')\r\n            .addRasterView(outputCOC, Format.RGBA8)\r\n            .blitScreen(0)\r\n            .version();\r\n\r\n        // downscale\r\n        const outputPrefilter = `DOF_PREFILTER${cameraID}`;\r\n        passContext\r\n            .updatePassViewPort(0.5)\r\n            .addRenderPass('dof-prefilter', `dof-prefilter${cameraID}`)\r\n            .setPassInput(colorTex, 'colorTex')\r\n            .setPassInput(outputCOC, 'cocTex')\r\n            .addRasterView(outputPrefilter, Format.RGBA8)\r\n            .blitScreen(1)\r\n            .version();\r\n\r\n        // bokeh blur\r\n        const outputBokeh = `DOF_BOKEH${cameraID}`;\r\n        passContext\r\n            .updatePassViewPort(0.5)\r\n            .addRenderPass('dof-bokeh', `dof-bokeh${cameraID}`)\r\n            .setPassInput(outputPrefilter, 'prefilterTex')\r\n            .addRasterView(outputBokeh, Format.RGBA8)\r\n            .blitScreen(2)\r\n            .version();\r\n\r\n        //filtering\r\n        const outputFilter = `DOF_FILTER${cameraID}`;\r\n        passContext\r\n            .updatePassViewPort(0.5)\r\n            .addRenderPass('dof-filter', `dof-filter${cameraID}`)\r\n            .setPassInput(outputBokeh, 'bokehTex')\r\n            .addRasterView(outputFilter, Format.RGBA8)\r\n            .blitScreen(3)\r\n            .version();\r\n\r\n        //combine\r\n        passContext\r\n            .updatePassViewPort()\r\n            .addRenderPass('dof-combine', `dof-combine${cameraID}`)\r\n            .setPassInput(outputFilter, 'filterTex')\r\n            .setPassInput(outputCOC, 'cocTex')\r\n            .setPassInput(colorTex, 'colorTex')\r\n            .addRasterView(slot, Format.RGBA8)\r\n            .blitScreen(4)\r\n            .version();\r\n    }\r\n}\r\n","import { EDITOR } from 'internal:constants';\r\n\r\nimport { Camera, CameraProjection, CameraUsage } from '../../render-scene/scene';\r\nimport { PipelineBuilder, Pipeline } from '../custom/pipeline';\r\n\r\nimport { passContext } from './utils/pass-context';\r\nimport { ForwardFinalPass } from './passes/forward-final-pass';\r\nimport { getCameraUniqueID } from '../custom/define';\r\n\r\nimport { BasePass } from './passes/base-pass';\r\nimport { ForwardPass } from './passes/forward-pass';\r\nimport { TAAPass } from './passes/taa-pass';\r\nimport { FSRPass } from './passes/fsr-pass';\r\nimport { BlitScreenPass } from './passes/blit-screen-pass';\r\n\r\nimport { ShadowPass } from './passes/shadow-pass';\r\nimport { HBAOPass } from './passes/hbao-pass';\r\nimport { PostProcess } from './components/post-process';\r\nimport { director } from '../../game';\r\n\r\nimport { Camera as CameraComponent } from '../../misc';\r\nimport { BloomPass, ColorGradingPass, DofPass, FloatOutputProcessPass, ForwardTransparencyPass,\r\n    ForwardTransparencySimplePass, FxaaPass, PostFinalPass, SkinPass } from './passes';\r\nimport { PipelineEventType } from '../pipeline-event';\r\n\r\nexport class PostProcessBuilder implements PipelineBuilder  {\r\n    pipelines: Map<string, BasePass[]> = new Map();\r\n    constructor () {\r\n        this.init();\r\n    }\r\n\r\n    onGlobalPipelineStateChanged (): void {\r\n        const passes = this.pipelines.get('forward');\r\n        if (passes !== undefined) {\r\n            for (let i = 0; i < passes.length; i++) {\r\n                const pass = passes[i];\r\n                if (typeof pass.onGlobalPipelineStateChanged === 'function') {\r\n                    pass.onGlobalPipelineStateChanged();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    init (): void {\r\n        const forward = new ForwardPass();\r\n        const forwardFinal = new ForwardFinalPass();\r\n        const shadowPass = new ShadowPass();\r\n\r\n        // default pipeline\r\n        this.addPass(shadowPass, 'default');\r\n\r\n        this.addPass(forward, 'default');\r\n        this.addPass(new ForwardTransparencySimplePass(), 'default');\r\n        this.addPass(forwardFinal, 'default');\r\n\r\n        // rendering dependent data generation\r\n        this.addPass(shadowPass);\r\n\r\n        // opaque objects forward lighting\r\n        this.addPass(forward);\r\n        this.addPass(new SkinPass());\r\n\r\n        // depth-based shading\r\n        this.addPass(new HBAOPass());\r\n\r\n        // float output related deferred processing: hdr + fog\r\n        this.addPass(new FloatOutputProcessPass());\r\n\r\n        // transparency should after hdr and depth-based shading\r\n        // temporary ignore CC_USE_FLOAT_OUTPUT\r\n        this.addPass(new ForwardTransparencyPass());\r\n\r\n        // user post-processing\r\n        this.addPass(new DofPass());\r\n        this.addPass(new TAAPass());\r\n        this.addPass(new FxaaPass());\r\n        this.addPass(new ColorGradingPass());\r\n        this.addPass(new BlitScreenPass());\r\n        this.addPass(new BloomPass());\r\n\r\n        // final output\r\n        this.addPass(new FSRPass()); // fsr should be final\r\n        this.addPass(new PostFinalPass());\r\n    }\r\n\r\n    getPass (passClass: typeof BasePass, pipelineName = 'forward'): BasePass | undefined {\r\n        const pp = this.pipelines.get(pipelineName);\r\n        return pp && pp.find((p): boolean => p instanceof passClass);\r\n    }\r\n    addPass (pass: BasePass, pipelineName = 'forward'): void {\r\n        let pp = this.pipelines.get(pipelineName);\r\n        if (!pp) {\r\n            pp = [];\r\n            this.pipelines.set(pipelineName, pp);\r\n        }\r\n\r\n        const oldIdx = pp.findIndex((p): boolean => p.name === pass.name);\r\n        if (oldIdx !== -1) {\r\n            pp.splice(oldIdx, 1);\r\n        }\r\n        pp.push(pass);\r\n    }\r\n    insertPass (pass: BasePass, passClass: typeof BasePass, pipelineName = 'forward'): void {\r\n        const pp = this.pipelines.get(pipelineName);\r\n        if (pp) {\r\n            const oldIdx = pp.findIndex((p): boolean => p.name === pass.name);\r\n            if (oldIdx !== -1) {\r\n                pp.splice(oldIdx, 1);\r\n            }\r\n\r\n            const idx = pp.findIndex((p): boolean => p instanceof passClass);\r\n            if (idx !== -1) {\r\n                pp.splice(idx + 1, 0, pass);\r\n            }\r\n        }\r\n    }\r\n\r\n    private initEditor (): void {\r\n        director.root!.cameraList.forEach((cam): void => {\r\n            if (cam.name === 'Editor Camera') {\r\n                cam.usePostProcess = cam.projectionType === CameraProjection.PERSPECTIVE;\r\n            }\r\n        });\r\n    }\r\n    private applyPreviewCamera (camera: Camera): void {\r\n        if (!camera.node.parent) return;\r\n        const camComp = camera.node.parent.getComponent(CameraComponent);\r\n        const oriCamera = camComp && camComp.camera;\r\n        if (oriCamera) {\r\n            camera.postProcess = oriCamera.postProcess;\r\n            camera.usePostProcess = oriCamera.usePostProcess;\r\n        }\r\n    }\r\n\r\n    private resortEditorCameras (cameras: Camera[]): Camera[] {\r\n        const newCameras: Camera[] = [];\r\n        for (let i = 0; i < cameras.length; i++) {\r\n            const c = cameras[i];\r\n            if (c.name === 'Editor Camera'\r\n            || c.name === 'Editor UIGizmoCamera'\r\n            || c.name === 'Scene Gizmo Camera') {\r\n                newCameras.push(c);\r\n            }\r\n        }\r\n        for (let i = 0; i < cameras.length; i++) {\r\n            const c = cameras[i];\r\n            if (newCameras.indexOf(c) === -1) {\r\n                newCameras.push(c);\r\n            }\r\n        }\r\n        return newCameras;\r\n    }\r\n\r\n    setup (cameras: Camera[], ppl: Pipeline): void {\r\n        if (EDITOR) {\r\n            this.initEditor();\r\n            cameras = this.resortEditorCameras(cameras);\r\n        }\r\n\r\n        passContext.ppl = ppl;\r\n        passContext.shadowPass = undefined;\r\n        passContext.forwardPass = undefined;\r\n        passContext.depthSlotName = '';\r\n        passContext.isFinalCamera = false;\r\n        passContext.isFinalPass = false;\r\n\r\n        let globalPP: PostProcess | undefined;\r\n        for (let i = 0; i < PostProcess.all.length; i++) {\r\n            const pp = PostProcess.all[i];\r\n            if (pp.global) {\r\n                globalPP = pp;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < cameras.length; i++) {\r\n            const camera = cameras[i];\r\n            if (!camera.scene) {\r\n                continue;\r\n            }\r\n            ppl.update(camera);\r\n            if (i === (cameras.length - 1)) {\r\n                passContext.isFinalCamera = true;\r\n            }\r\n\r\n            if (EDITOR && camera.cameraUsage === CameraUsage.PREVIEW) {\r\n                this.applyPreviewCamera(camera);\r\n            }\r\n\r\n            ppl.addBuiltinReflectionProbePass(camera);\r\n\r\n            passContext.postProcess = camera.postProcess || globalPP;\r\n\r\n            director.root!.pipelineEvent.emit(PipelineEventType.RENDER_CAMERA_BEGIN, camera);\r\n\r\n            this.renderCamera(camera, ppl);\r\n        }\r\n    }\r\n\r\n    getCameraPipelineName (camera: Camera): string {\r\n        let pipelineName = camera.pipeline;\r\n        if (!pipelineName && camera.usePostProcess) {\r\n            pipelineName = 'forward';\r\n        } else {\r\n            pipelineName = 'default';\r\n        }\r\n        return pipelineName;\r\n    }\r\n\r\n    getCameraPasses (camera: Camera): BasePass[] {\r\n        const pipelineName = this.getCameraPipelineName(camera);\r\n        return this.pipelines.get(pipelineName) || [];\r\n    }\r\n\r\n    renderCamera (camera: Camera, ppl: Pipeline): void {\r\n        passContext.passPathName = `${getCameraUniqueID(camera)}`;\r\n        passContext.camera = camera;\r\n        passContext.updateViewPort();\r\n\r\n        const passes = this.getCameraPasses(camera);\r\n\r\n        const taaPass = passes.find((p): boolean => p instanceof TAAPass) as TAAPass;\r\n        if (taaPass && taaPass.checkEnable(camera)) {\r\n            taaPass.applyCameraJitter(camera);\r\n            taaPass.updateSample();\r\n        }\r\n\r\n        const floatOutputPass = passes.find((p): boolean => p instanceof FloatOutputProcessPass) as FloatOutputProcessPass;\r\n\r\n        let lastPass: BasePass | undefined;\r\n        for (let i = 0; i < passes.length; i++) {\r\n            const pass = passes[i];\r\n            if (!pass.checkEnable(camera)) {\r\n                continue;\r\n            }\r\n\r\n            if (i === (passes.length - 1)) {\r\n                passContext.isFinalPass = true;\r\n            }\r\n\r\n            if (pass.name === 'BloomPass') {\r\n                // for override post-process builder\r\n                (pass as BloomPass).hdrInputName = (floatOutputPass === undefined || floatOutputPass === null)\r\n                    ? '' :  floatOutputPass.getHDRInputName();\r\n            }\r\n\r\n            pass.lastPass = lastPass;\r\n            pass.render(camera, ppl);\r\n\r\n            lastPass = pass;\r\n        }\r\n    }\r\n}\r\n","import { setCustomPipeline } from '../custom';\r\nimport { PostProcessBuilder } from './post-process-builder';\r\nimport './utils/pass-context';\r\n\r\nexport * from './components';\r\nexport * from './passes';\r\nexport * from './post-process-builder';\r\n\r\nsetCustomPipeline('Forward', new PostProcessBuilder());\r\nsetCustomPipeline('Custom', new PostProcessBuilder());\r\n"],"names":["sphere","geometry","create","boundingBox","rangedDirLightBoundingBox","PassContext","clearFlag","ClearFlagBit","COLOR","clearColor","Color","clearDepthColor","ppl","camera","material","pass","rasterWidth","rasterHeight","layoutName","shadingScale","viewport","Rect","passViewport","passPathName","passVersion","isFinalCamera","isFinalPass","depthSlotName","shadowPass","undefined","forwardPass","postProcess","maxSpotLights","maxSphereLights","maxPointLights","maxRangedDirLights","_proto","prototype","setClearFlag","setClearColor","x","y","z","w","Vec4","set","setClearDepthColor","version","name","setVersion","clearBlack","passContext","addRenderPass","passName","width","height","setViewport","Viewport","addSceneLights","queue","flags","SceneFlags","BLEND","scene","spotLights","sphereLights","pointLights","rangedDirLights","numSpotLights","Math","min","length","numSphereLights","numPointLights","numRangedDirLights","i","light","baked","position","range","sphereFrustum","frustum","addSceneOfCamera","LightInfo","transform","node","getWorldMatrix","aabbFrustum","updateViewPort","EDITOR","area","getRenderArea","window","floor","updatePassViewPort","offsetScale","addRasterView","format","offscreen","residency","ResourceResidency","MANAGED","containsResource","Format","DEPTH_STENCIL","addDepthStencil","addRenderTarget","addRenderWindow","updateRenderWindow","updateRenderTarget","updateDepthStencil","loadOp","LoadOp","CLEAR","NONE","LOAD","StoreOp","STORE","copy","SkyBoxFlagValue","VALUE","setPassInput","inputName","shaderName","addTexture","blitScreen","passIdx","addQueue","QueueHint","RENDER_TRANSPARENT","addCameraQuad","_BasePassID","_pointSampler","_samplerPointInfo","SamplerInfo","Filter","POINT","Address","CLAMP","getRTFormatBeforeToneMapping","useFloatOutput","getMacroBool","pipelineSceneData","isHDR","supportsRGBA16HalfFloatTexture","device","RGBA16F","RGBA8","forceEnableFloatOutput","enabled","supportFloatOutput","setMacroBool","macro","ENABLE_FLOAT_OUTPUT","disablePostProcessForDebugView","debugView","cclegacy","director","root","singleMode","getShadowMapSampler","pipeline","getSampler","BasePass","effectName","_id","context","getCameraUniqueID","_material","enable","outputNames","lastPass","enableInAllEditorCamera","slotName","index","checkEnable","renderProfiler","showStatistics","_createClass","key","get","effectReloaded","mat","Material","_uuid","initialize","ForwardFinalPass","_BasePass","_this","_len","arguments","args","Array","_key","call","apply","concat","_inheritsLoose","render","cameraID","input0","slot0","isOffScreen","fb","framebuffer","ct","colorTextures","ForwardPass","depthBufferShadingScale","calcDepthSlot","canUsePrevDepth","_camera$scene","clearDepth","clearStencil","slot1","_iterator","_createForOfIteratorHelperLoose","mainLightShadows","_step","done","dirShadowName","value","_iterator2","spotLightShadows","_step2","spotShadowName","forwardQueue","RENDER_OPAQUE","OPAQUE_OBJECT","CUTOUT_OBJECT","GEOMETRY","forwardAddQueue","shadowInfo","shadows","mainLight","type","ShadowType","Planar","_camera$scene2","TRANSPARENT_OBJECT","SHADOW_CASTER","PostProcessSetting","_dec","ccclass","_dec2","requireComponent","PostProcess","_class","_Component","onEnable","pp","getComponent","addSetting","onDisable","removeSetting","Component","TAA","disallowMultiple","_class2","_PostProcessSetting","_sampleScale","_initializer","_feedback","_initializer2","v","_applyDecoratedInitializer","serializable","_applyDecoratedDescriptor","property","Object","getOwnPropertyDescriptor","TAAMask","Camera","maskCamera","_mask","start","warn","tex","RenderTexture","reset","game","canvas","targetTexture","enabledInHierarchy","getSetting","settingClass","cls","setting","SettingPass","tempVec4","halton8","Vec2","forEach","SampleOffsets","x2","x3","x4","x5","TAAPass","_SettingPass","prevMatViewProj","Mat4","taaTextureIndex","samples","sampleIndex","sampleOffset","forceRender","dirty","taaMaskMaterial","firstRender","applyCameraJitter","_isProjDirty","update","matProj","m12","m13","invert","matProjInv","multiply","matViewProj","matView","matViewProjInv","updateSample","offset","ZERO","sampleScale","taaMask","maskTex","mask","mi","MaterialInstance","parent","recompileShaders","USE_TAA_MASK","setProperty","black","builtinResMgr","feedback","historyTexture","depthTex","PERSISTENT","FSR","CCFloat","_sharpness","FSRPass","inputWidth","inputHeight","outWidth","outHeight","clamp","sharpness","easu","BlitScreenMaterial","_dec3","_dec4","BlitScreen","_dec5","_dec6","_dec7","visible","_dec8","_dec9","_class3","_class4","_activeMaterials","_initializer3","_materials","_initializer4","updateActiveMaterials","materials","m","push","onLoad","j","_this$_materials$i$ma","uuid","BlitScreenPass","outputName","activeMaterials","slotIdx","ShadowPass","cameraName","buildShadowPasses","mainLightShadowNames","spotLightShadowNames","ColorGrading","Texture2D","_contribute","_colorGradingMap","val","Bloom","CCBoolean","CCInteger","_enableAlphaMask","_useHdrIlluminance","_threshold","_iterations","_intensity","_initializer5","HBAO","_radiusScale","_angleBiasDegree","_blurSharpness","_aoSaturation","_needBlur","DOF","_focusDistance","_focusRange","_bokehRadius","vec2","HBAOParams","_uvDepthToEyePosParams","_radiusParam","_miscParam","_blurParam","_depthTexFullResolution","_depthTexResolution","_sceneScale","_cameraFov","toRadian","_aoStrength","_randomDirAndJitter","_init","pixelFormat","PixelFormat","RGBA8888","arrayBuffer","Uint8Array","image","ImageAsset","_data","_compressed","randomTexture","setFilters","TextureFilter","NEAREST","setMipFilter","setWrapMode","WrapMode","REPEAT","HALF_KERNEL_RADIUS","INV_LN2","SQRT_LN2","gR","gR2","gNegInvR2","gMaxRadiusPixels","gFocalLen","tan","gTanAngleBias","gStrength","gUVToViewA","gUVToViewB","BlurSigma","gBlurFallOff","gBlurDepthThreshold","HBAOPass","HBAO_PASS_INDEX","HBAO_BLUR_X_PASS_INDEX","HBAO_BLUR_Y_PASS_INDEX","HBAO_COMBINED_PASS_INDEX","_hbaoParams","_initialize","averageObjectSize","Map","_proto2","onGlobalPipelineStateChanged","passes","beginChangeStatesSilently","tryCompile","endChangeStatesSilently","getSceneScale","sceneScale","nearClip","has","_calculateObjectSize","visibility","objectSize","aoStrength","depthTexFullResolution","depthTexResolution","cameraFov","fov","radiusScale","angleBiasDegree","blurSharpness","aoSaturation","isEnabled","DebugViewSingleType","AO","isCompositeModeEnabled","DebugViewCompositeType","inputRT","inputDS","hbaoInfo","_renderHBAOPass","hbaoCombinedInputRTName","rtName","needBlur","haboBlurInfoX","_renderHBAOBlurPass","haboBlurInfoY","_renderHBAOCombinedPass","uvDepthToEyePosParams","radiusParam","miscParam","blurParam","outputRT","dsName","isYPass","renderScene","sumSize","Vec3","modelCount","models","model","worldBounds","layer","add","halfExtents","divide","v3","scale","ColorGradingPass","colorGradingMap","contribute","textureSize","input","slot","isSquareMap","passIndx","MAX_BLOOM_FILTER_PASS_NUM","BLOOM_DOWNSAMPLEPASS_INDEX","BLOOM_UPSAMPLEPASS_INDEX","BLOOM_COMBINEPASS_INDEX","BloomPass","_hdrInputName","output","enableAlphaMask","useHDRIntensity","useHdrIlluminance","threshold","iterations","texSize","bloomPassDownSampleRTName","downSamplerInput","bloomPassUpSampleRTName","upSamplerInput","intensity","FXAA","FxaaPass","FloatOutputProcessPass","hdrInputName","getHDRInputName","needDepthInput","fog","FOG_TYPE_NONE","copyDS","copyInputDSPassLayoutName","copyInputDSPass","ForwardTransparencyPass","outputDS","UI","ForwardTransparencySimplePass","COPY_INPUT_DS_PASS_INDEX","SSSS_BLUR_X_PASS_INDEX","SSSS_BLUR_Y_PASS_INDEX","hasSkinObject","sceneData","skin","skinMaterialModel","_varianceArray","_strengthParameterArray","_vec3Temp","_vec3Temp2","_vec4Temp","_vec4Temp2","EXPONENT","I_SAMPLES_COUNT","SSSSBlurData","_v3SSSSStrength","_v3SSSSFallOff","_kernel","_gaussian","out","variance","r","xx","exp","yy","zz","_profile","multiplyScalar","_updateSampleCount","strength","nSamples","step","o","sign","abs","pow","w0","w1","remainder","add3f","SkinPass","ssssBlurData","_activate","warnID","standardSkinModel","_this$lastPass","_buildSSSSBlurPass","_buildSpecularPass","ssssBlurRTName","ssssBlurDSName","ssssblurXPassLayoutName","ssssblurXPassPassName","blurRadius","sssIntensity","kernel","ssssblurYPassLayoutName","ssssblurYPassPassName","PostFinalPass","DofPass","cocParams","focusDistance","focusRange","bokehRadius","mainTexTexelSize","colorTex","outputCOC","outputPrefilter","outputBokeh","outputFilter","PostProcessBuilder","pipelines","init","forward","forwardFinal","addPass","getPass","passClass","pipelineName","find","p","oldIdx","findIndex","splice","insertPass","idx","initEditor","cameraList","cam","usePostProcess","projectionType","CameraProjection","PERSPECTIVE","applyPreviewCamera","camComp","CameraComponent","oriCamera","resortEditorCameras","cameras","newCameras","c","indexOf","setup","globalPP","all","global","addBuiltinReflectionProbePass","pipelineEvent","emit","PipelineEventType","RENDER_CAMERA_BEGIN","renderCamera","getCameraPipelineName","getCameraPasses","taaPass","floatOutputPass","setCustomPipeline"],"mappings":"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"}